(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{534:(e,t,r)=>{"use strict";r.d(t,{default:()=>y});var n=r(5155),a=r(2115),l=r(5695),o=r(5799);r(5716);var s=r(9911),i=r(7097),c=r(2515);let u=e=>{let{value:t,onChange:r}=e,[l,o]=(0,a.useState)(!1);return(0,n.jsxs)("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-xl focus-within:ring-2 focus-within:ring-green-400 focus-within:bg-white shadow-sm transition-all duration-200",children:[(0,n.jsx)(c.Rlk,{className:"text-gray-400 mx-3 text-lg shrink-0"}),(0,n.jsx)("input",{type:l?"text":"password",name:"password",placeholder:"Password",value:t,onChange:r,className:"bg-transparent outline-none text-sm w-full p-3 text-gray-700 placeholder-gray-400"}),(0,n.jsx)("div",{onClick:()=>o(!l),className:"cursor-pointer pr-3 text-gray-400 hover:text-green-500 transition-colors",children:l?(0,n.jsx)(s.mx3,{}):(0,n.jsx)(s.Ny1,{})})]})},d={"school-branch":{"School of Technology":["B.Tech.","BCA"],"School of Science":["B.Sc."],"School of Management Studies and Liberal Arts":["B.Com.","BBA"]},"branch-stream":{"B.Tech.":["Chemical","Computer Science & Engg","Fire & EHS"],BCA:["General"],"B.Sc.":["Biotechnology","Chemistry","Data Science","Micro Biology"],"B.Com.":["B.Com (Hons.)"],BBA:["Business Analytics","HR / Marketing /Accounting & Finance / IT Mg"]}},h="p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 focus:bg-white outline-none shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200",m=e=>{let{role:t,formData:r,handleChange:l}=e,o=Object.keys(d["school-branch"]),i=(0,a.useMemo)(()=>r.school&&d["school-branch"][r.school]||[],[r.school]),c=(0,a.useMemo)(()=>r.branch&&d["branch-stream"][r.branch]||[],[r.branch]);return"Student"===t?(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 animate-fade-in-down",children:[(0,n.jsxs)("div",{className:"sm:col-span-2 relative",children:[(0,n.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,n.jsx)(s.MdY,{})}),(0,n.jsxs)("select",{name:"school",value:r.school,onChange:e=>{l(e)},className:"".concat(h," pl-10"),children:[(0,n.jsx)("option",{value:"",children:"Select School / Institution"}),o.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]})]}),(0,n.jsxs)("select",{name:"branch",value:r.branch,onChange:e=>{l(e)},className:h,disabled:!r.school,children:[(0,n.jsx)("option",{value:"",children:"Select Branch"}),i.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("input",{name:"year",type:"number",placeholder:"Year",value:r.year,onChange:l,className:h}),(0,n.jsxs)("select",{name:"stream",value:r.stream,onChange:l,className:h,disabled:!r.branch,children:[(0,n.jsx)("option",{value:"",children:"Select Stream"}),c.map(e=>(0,n.jsx)("option",{value:e,children:e},e))]}),(0,n.jsx)("input",{name:"enrollment_id",placeholder:"Enrollment ID",value:r.enrollment_id,onChange:l,className:h})]}):"Teacher"===t?(0,n.jsxs)("select",{name:"title",value:r.title,onChange:l,className:"".concat(h," animate-fade-in-down"),children:[(0,n.jsx)("option",{value:"",children:"Select Title"}),(0,n.jsx)("option",{value:"Program Coordinator",children:"Program Coordinator"}),(0,n.jsx)("option",{value:"Head Of Department",children:"Head Of Department"}),(0,n.jsx)("option",{value:"Dean",children:"Dean"}),(0,n.jsx)("option",{value:"Provost",children:"Provost"}),(0,n.jsx)("option",{value:"President",children:"President"})]}):null},g="p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 focus:bg-white outline-none shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200",f=e=>{let{formData:t,handleChange:r,handleGetOtp:a,otpCooldown:l}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-4 animate-fade-in",children:[(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsx)("input",{type:"text",name:"name",placeholder:"Full Name",value:t.name,onChange:r,className:g}),(0,n.jsx)("input",{type:"text",name:"nickname",placeholder:"Nickname",value:t.nickname,onChange:r,className:g})]}),(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{className:"flex-grow",children:(0,n.jsx)(i.A,{type:"email",name:"email",placeholder:"Email Address",value:t.email,onChange:r,icon:s.Wjb})}),(0,n.jsx)("button",{type:"button",onClick:a,disabled:l>0,className:"px-4 rounded-xl text-white text-sm font-medium transition-all duration-200 whitespace-nowrap shadow-sm ".concat(l>0?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 hover:shadow-md"),children:l>0?"".concat(l,"s"):"Get OTP"})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsx)("input",{type:"number",name:"otp",placeholder:"Enter OTP",value:t.otp,onChange:r,className:g}),(0,n.jsx)(u,{value:t.password,onChange:r})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,n.jsxs)("select",{name:"role",value:t.role,onChange:r,className:g,children:[(0,n.jsx)("option",{value:"",children:"Select Role"}),(0,n.jsx)("option",{value:"Teacher",children:"Teacher"}),(0,n.jsx)("option",{value:"Student",children:"Student"})]}),(0,n.jsxs)("select",{name:"gender",value:t.gender,onChange:r,className:g,children:[(0,n.jsx)("option",{value:"",children:"Select Gender"}),(0,n.jsx)("option",{value:"male",children:"Male"}),(0,n.jsx)("option",{value:"female",children:"Female"}),(0,n.jsx)("option",{value:"other",children:"Other"})]})]}),(0,n.jsx)(m,{role:t.role,formData:t,handleChange:r})]})};var p=r(6874),x=r.n(p);let b=e=>{let{formData:t,handleChange:r}=e;return(0,n.jsxs)("div",{className:"flex flex-col gap-4 animate-fade-in",children:[(0,n.jsx)("input",{type:"text",name:"nickname",placeholder:"Nickname",value:t.nickname,onChange:r,className:"p-3 bg-gray-50 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 focus:bg-white outline-none shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200"}),(0,n.jsx)(i.A,{type:"email",name:"email",placeholder:"Email Address",value:t.email,onChange:r,icon:s.Wjb}),(0,n.jsx)(u,{value:t.password,onChange:r}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(x(),{href:"/forgot-password",className:"text-sm font-medium text-green-600 hover:text-green-700 hover:underline transition-colors duration-200",children:"Forgot Password?"})})]})};var v=r(4239);let y=e=>{let{defaultType:t="register"}=e,[r,s]=(0,a.useState)("register"===t),[i,c]=(0,a.useState)({name:"",nickname:"",email:"",otp:"",password:"",role:"",gender:"",branch:"",year:"",stream:"",enrollmentId:"",title:"",school:""}),[u,d]=(0,a.useState)(0),h=(0,l.useRouter)();(0,a.useEffect)(()=>{if(u>0){let e=setTimeout(()=>d(u-1),1e3);return()=>clearTimeout(e)}},[u]),(0,a.useEffect)(()=>{s("register"===t)},[t]);let m=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},g=async e=>{e&&e.preventDefault&&e.preventDefault(),r?await (0,v.DY)(e,e=>{o.oR.success("User registered successfully!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),s(!1)},e=>{o.oR.error(e.message||"Registration failed!",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}})}):await (0,v.zz)(e,e=>{var t;o.oR.success("Signed in successfully!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),(null==e||null==(t=e.user)?void 0:t.role)?h.push("/".concat(e.user.role.toLowerCase())):h.push("/student")},e=>{o.oR.error(e.message||"Login failed!",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}})})};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100 font-sans",children:[(0,n.jsxs)("main",{className:"flex flex-col md:flex-row w-full max-w-6xl bg-white rounded-3xl shadow-2xl overflow-hidden transition-all duration-300",children:[(0,n.jsxs)("div",{className:"w-full md:w-3/5 p-8 sm:p-10 flex flex-col justify-center",children:[(0,n.jsxs)("div",{className:"mb-8 text-center md:text-left",children:[(0,n.jsx)("h2",{className:"text-3xl sm:text-4xl font-extrabold text-green-500 tracking-tight",children:r?"Create Account":"Welcome Back"}),(0,n.jsx)("p",{className:"text-gray-400 mt-2 text-sm",children:r?"Enter your details to get started":"Please enter your details to sign in"})]}),(0,n.jsxs)("form",{onSubmit:g,className:"w-full",children:[r?(0,n.jsx)(f,{formData:i,handleChange:m,handleGetOtp:()=>{if(!i.email)return void o.oR.error("Please enter your email first",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}});(0,v.A$)(i.email,"verification",e=>{o.oR.success(e.message||"OTP sent!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),d(15)},e=>o.oR.error(e.message||"Failed to send OTP",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}}))},otpCooldown:u}):(0,n.jsx)(b,{formData:i,handleChange:m}),(0,n.jsx)("button",{type:"submit",className:"w-full mt-6 bg-green-500 text-white rounded-xl px-12 py-3.5 font-bold text-sm tracking-wide hover:bg-green-600 hover:shadow-lg hover:-translate-y-0.5 transition-all duration-200 active:transform active:scale-95",children:r?"Sign Up":"Sign In"})]})]}),(0,n.jsxs)("div",{className:"w-full md:w-2/5 bg-gradient-to-br from-green-400 to-green-600 text-white flex flex-col items-center justify-center text-center py-12 px-8 relative overflow-hidden",children:[(0,n.jsx)("div",{className:"absolute top-0 right-0 -mr-12 -mt-12 w-40 h-40 rounded-full bg-white opacity-10 blur-xl"}),(0,n.jsx)("div",{className:"absolute bottom-0 left-0 -ml-12 -mb-12 w-40 h-40 rounded-full bg-white opacity-10 blur-xl"}),(0,n.jsx)("h2",{className:"text-3xl font-bold mb-3 z-10",children:r?"Have an Account?":"New Here?"}),(0,n.jsx)("div",{className:"w-16 h-1 bg-white rounded-full mb-6 opacity-50 z-10"}),(0,n.jsx)("p",{className:"mb-8 text-green-50 text-sm leading-relaxed max-w-xs z-10",children:r?"To keep connected with us please login with your personal info.":"Enter your personal details and start your journey with us today."}),(0,n.jsx)("button",{type:"button",onClick:()=>s(!r),className:"border-2 border-white rounded-full px-10 py-2.5 font-bold text-sm uppercase tracking-wider hover:bg-white hover:text-green-600 transition-all duration-300 z-10 shadow-lg",children:r?"Sign In":"Sign Up"})]})]}),(0,n.jsx)(o.ToastContainer,{position:"top-right",autoClose:2500,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})}},4239:(e,t,r)=>{"use strict";r.d(t,{A$:()=>n.A$,AS:()=>n.AS,DY:()=>n.DY,In:()=>n.In,Pq:()=>n.Pq,VU:()=>n.VU,Yq:()=>n.Yq,bB:()=>n.bB,eg:()=>n.eg,iD:()=>n.iD,kQ:()=>n.kQ,lh:()=>n.lh,lo:()=>n.lo,qM:()=>n.qM,s_:()=>n.s_,tq:()=>n.tq,xF:()=>n.xF,xw:()=>n.xw,zz:()=>n.zz});var n=r(2105);r(8222),r(8782)},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var n=r(2115),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=n.createContext&&n.createContext(a),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,a,l;n=e,a=t,l=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(a))in n?Object.defineProperty(n,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[a]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:a,size:l,title:i}=e,u=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)r=l[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,o),d=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==l?n.createElement(l.Consumer,null,e=>t(e)):t(a)}},5716:()=>{},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return a}});let n=r(2115);function a(e,t){let r=(0,n.useRef)(null),a=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=a.current;t&&(a.current=null,t())}else e&&(r.current=l(e,n)),t&&(a.current=l(t,n))},[e,t])}function l(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7097:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var n=r(5155);r(2115);let a=e=>{let{icon:t,className:r,...a}=e;return(0,n.jsxs)("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-xl focus-within:ring-2 focus-within:ring-green-400 focus-within:bg-white shadow-sm transition-all duration-200 ".concat(r),children:[t&&(0,n.jsx)(t,{className:"text-gray-400 mx-3 text-lg shrink-0"}),(0,n.jsx)("input",{...a,className:"bg-transparent outline-none text-sm w-full p-3 text-gray-700 placeholder-gray-400 rounded-xl"})]})}},7896:(e,t,r)=>{Promise.resolve().then(r.bind(r,534))},8782:(e,t,r)=>{"use strict";r.d(t,{Bv:()=>n,QZ:()=>l,dm:()=>i,gR:()=>s,lm:()=>a});let n=e=>new Date(new Date(e)-6e4*new Date().getTimezoneOffset()).toISOString().slice(0,16),a={primary:["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981"],status:{present:"#10B981",absent:"#EF4444",late:"#F59E0B",exc:"#3B82F6"},geo:["#10B981","#EF4444","#9CA3AF"]},l={"school-branch":{"School of Technology":["B.Tech.","BCA"],"School of Science":["B.Sc."],"School of Management Studies and Liberal Arts":["B.Com.","BBA"]},"branch-stream":{"B.Tech.":["Chemical","Chemical D2D","Computer Science & Engg.","Computer Science & Engg. D2D","Fire & EHS","Fire & EHS. D2D"],BCA:["General"],"B.Sc.":["Biotechnology","Chemistry","Data Science","Micro Biology"],"B.Com.":["/ B.Com (Hons.)"],BBA:["Business Analytics","HR / Marketing /Accounting & Finance / IT Mg"]}},o=e=>{try{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}catch(e){return null}},s=e=>(e&&"object"==typeof e?e._id:e)||"",i=e=>Array.isArray(e)?e.map(e=>{var t,r,n,a,i,c,u,d;let h=e.user_id||{},{school:m,degree:g,stream:f}=(e=>{if(!e)return{school:"Other",degree:"Other",stream:"Unknown"};let t=e.trim();for(let[e,r]of Object.entries(l["school-branch"]))for(let n of r)if(t.includes(n)){let r=t.replace(n,"").replace(/^[\.\/\-\s]+/,"").trim();if(l["branch-stream"][n]){let e=l["branch-stream"][n].find(e=>r.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(r.toLowerCase()));e&&(r=e)}return{school:e,degree:n,stream:r||"General"}}return{school:"Other",degree:"Other",stream:t}})(e.branch||h.branch||"Unknown"),p=null==(r=e.locations)||null==(t=r[0])?void 0:t.lat,x=null==(a=e.locations)||null==(n=a[0])?void 0:n.long,b=((e,t,r,n)=>{if(!e||!t||!r||!n)return null;let a=e=>e*Math.PI/180,l=Math.sin(a(r-e)/2)**2+Math.cos(a(e))*Math.cos(a(r))*Math.sin(a(n-t)/2)**2;return 12742e3*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))})(p,x,null==(c=e.locations)||null==(i=c.at(-1))?void 0:i.lat,null==(d=e.locations)||null==(u=d.at(-1))?void 0:u.long),v="no-locations";return v=e.locations&&0!==e.locations.length?1===e.locations.length?"single":null!==b&&b<=500?"in":"out":"no-locations",{...e,_eventId:s(e.event_id),_parsedInDate:o(e.punch_in_time),_parsedOutDate:o(e.punch_out_time),_school:m,_degree:g,_stream:f,_year:(e.year||h.year||"Unknown").toString(),_searchName:(e.name||h.name||"").toLowerCase(),_searchBranch:(e.branch||h.branch||"").toString().trim().toLowerCase(),_searchYear:(e.year||h.year||"").toString().trim().toLowerCase(),_searchEnroll:(e.enrollment_id||h.enrollment_id||"").toString().toLowerCase(),_dist:b,_distBucket:v,_distValid:null!==b&&b<=500}}):[]}},e=>{e.O(0,[797,711,479,726,874,222,441,964,358],()=>e(e.s=7896)),_N_E=e.O()}]);