(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{3327:(e,t,s)=>{"use strict";s.d(t,{default:()=>eu});var a=s(5155),r=s(9137),l=s.n(r),n=s(2115),i=s(5799);s(5716);var o=s(7580),d=s(9803),c=s(9074),m=s(9103),x=s(7907),u=s(2713),g=s(9772),h=s(1154),p=s(3783),b=s(4835),f=s(4239);let j={Search:()=>(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),Download:()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),Filter:()=>(0,a.jsx)("svg",{className:"w-4 h-4 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z"})}),MapPin:()=>(0,a.jsxs)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})},v=e=>{try{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}catch(e){return null}},y=e=>e?"string"==typeof e?e:e._id||"":"",N=function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{var a;return null!=(a=t.split(".").reduce((e,t)=>e?e[t]:void 0,e))?a:s}catch(e){return s}},w=()=>(0,a.jsx)("div",{className:"animate-pulse space-y-4",children:[...Array(10)].map((e,t)=>(0,a.jsx)("div",{className:"flex space-x-4",children:(0,a.jsx)("div",{className:"h-12 bg-gray-100 rounded w-full"})},t))}),k=()=>{let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[p,b]=(0,n.useState)(""),[k,S]=(0,n.useState)(""),[A,C]=(0,n.useState)(""),[_,L]=(0,n.useState)(""),[E,M]=(0,n.useState)(1);(0,n.useEffect)(()=>{z(),B()},[]),(0,n.useEffect)(()=>{l||B()},[c]);let z=async()=>{try{let e=await fetch("".concat(f.AS,"/api/events")),t=await e.json();(null==t?void 0:t.events)&&Array.isArray(t.events)&&r(t.events)}catch(e){console.error("Event fetch error:",e)}},B=async()=>{i(!0),d("");try{await (0,f.Yq)({event_id:c||void 0},e=>{let s=(Array.isArray(null==e?void 0:e.data)?e.data:[]).map(e=>({...e,_eventId:y(e.event_id),_userId:y(e.user_id)})).sort((e,t)=>{let s=v(e.punch_in_time),a=v(t.punch_in_time);return s&&a?a-s:0});t(s),i(!1)},e=>{d((null==e?void 0:e.message)||"Error fetching attendance"),i(!1)})}catch(e){d((null==e?void 0:e.message)||"Fetch failed"),i(!1)}},P=e=>{let t=y(e);if(!t)return"N/A";let a=s.find(e=>y(e._id)===t);return(null==a?void 0:a.title)||N(e,"title")||"N/A"},F=e=>{if(!Array.isArray(e)||0===e.length)return"no-locations";if(1===e.length)return"single";let t=e[0],s=e[e.length-1],a=((e,t,s,a)=>{let r=e=>e*Math.PI/180;if([e,t,s,a].some(e=>null==e||Number.isNaN(Number(e))))return null;let l=r(Number(e)),n=r(Number(s)),i=Math.sin(r(Number(s)-Number(e))/2)**2+Math.cos(l)*Math.cos(n)*Math.sin(r(Number(a)-Number(t))/2)**2;return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3})(null==t?void 0:t.lat,null==t?void 0:t.long,null==s?void 0:s.lat,null==s?void 0:s.long);return null===a?"no-locations":a<=500?"in":"out"},R=(0,n.useMemo)(()=>{let t=new Set;return e.forEach(e=>e.status&&t.add(e.status)),Array.from(t)},[e]),D=(0,n.useMemo)(()=>{let t=e.filter(e=>{var t;let s=(e.name||N(e,"user_id.name","")).toLowerCase(),a=(e.branch||N(e,"user_id.branch","")||"").toString().trim().toLowerCase(),r=(e.year||N(e,"user_id.year","")||"").toString().trim().toLowerCase(),l=(e.enrollment_id||N(e,"user_id.enrollment_id","")).toString().toLowerCase(),n=!c||y(e.event_id)===c,i=!x||(null==(t=e.status)?void 0:t.toLowerCase())===x.toLowerCase(),o=F(e.locations),d=!g||o===g,m=!p||s.includes(p.toLowerCase()),u=!k||a.includes(k.trim().toLowerCase()),h=!A||l.includes(A.trim().toLowerCase()),b=!_||r.includes(_.trim().toLowerCase());return n&&i&&d&&m&&u&&h&&b});return M(1),t},[e,c,x,g,p,k,A,_]),O=50*E,T=O-50,U=D.slice(T,O),I=Math.ceil(D.length/50);return o?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-[50vh] text-red-500",children:[(0,a.jsx)("p",{className:"text-xl font-semibold",children:"Error Loading Data"}),(0,a.jsx)("p",{className:"text-sm",children:o}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-gray-200 rounded-lg text-gray-800 hover:bg-gray-300",children:"Retry"})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 p-6 md:p-8 font-sans text-gray-800",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Attendance Overview"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and track student check-ins and locations."})]}),(0,a.jsxs)("button",{onClick:()=>(e=>{if(!e.length)return alert("No data to export");let t=[["Event Name","User Name","Nickname","Enrollment ID","Branch","Year","Status","Punch In","Punch Out","In Lat/Long","Out Lat/Long","Distance Check"],...e.map(e=>{let t=e.branch||N(e,"user_id.branch","N/A"),s=e.year||N(e,"user_id.year","N/A"),a=P(e.event_id),r=e.name||N(e,"user_id.name","N/A"),l=e.nickname||N(e,"user_id.nickname","N/A"),n=e.enrollment_id||N(e,"user_id.enrollment_id","N/A"),i=v(e.punch_in_time),o=v(e.punch_out_time),d=Array.isArray(e.locations)?e.locations:[],c=F(d);return[a,r,l,n,t,s,e.status,i?i.toLocaleString():"N/A",o?o.toLocaleString():"N/A",d[0]?"".concat(d[0].lat,", ").concat(d[0].long):"N/A",d[d.length-1]?"".concat(d[d.length-1].lat,", ").concat(d[d.length-1].long):"N/A",c.toUpperCase()]})].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),s=URL.createObjectURL(new Blob([t],{type:"text/csv"})),a=document.createElement("a");a.href=s,a.download="attendance_report.csv",a.click(),URL.revokeObjectURL(s)})(D),className:"flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl font-medium shadow-lg shadow-emerald-200 hover:bg-emerald-700 hover:shadow-xl transition-all active:scale-95",children:[(0,a.jsx)(j.Download,{}),"Export CSV"]})]}),(0,a.jsxs)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-4 text-sm font-semibold text-gray-600 uppercase tracking-wider",children:[(0,a.jsx)(j.Filter,{})," Filters"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-4",children:[(0,a.jsx)("div",{className:"xl:col-span-2",children:(0,a.jsxs)("select",{value:c,onChange:e=>m(e.target.value),className:"w-full bg-gray-50 border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block p-2.5",children:[(0,a.jsx)("option",{value:"",children:"All Events"}),s.map(e=>(0,a.jsx)("option",{value:y(e._id),children:e.title},y(e._id)))]})}),(0,a.jsxs)("select",{value:x,onChange:e=>u(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-blue-500 block p-2.5",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),R.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-700 text-sm rounded-lg focus:ring-blue-500 block p-2.5",children:[(0,a.jsx)("option",{value:"",children:"Distance (All)"}),(0,a.jsx)("option",{value:"in",children:"✅ Verified (≤500m)"}),(0,a.jsx)("option",{value:"out",children:"⚠️ Out of Range"}),(0,a.jsx)("option",{value:"single",children:"\uD83D\uDCCD Single Punch"}),(0,a.jsx)("option",{value:"no-locations",children:"❌ No Location"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,a.jsx)(j.Search,{})}),(0,a.jsx)("input",{type:"text",placeholder:"Name",value:p,onChange:e=>b(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Branch",value:k,onChange:e=>S(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5"}),(0,a.jsx)("input",{type:"text",placeholder:"Enrollment",value:A,onChange:e=>C(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5"}),(0,a.jsx)("input",{type:"text",placeholder:"Year",value:_,onChange:e=>L(e.target.value),className:"bg-gray-50 border border-gray-200 text-gray-900 text-sm rounded-lg focus:ring-blue-500 block w-full p-2.5"})]})]}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:l?(0,a.jsx)("div",{className:"p-6",children:(0,a.jsx)(w,{})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-100",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4 font-semibold",children:"User Details"}),(0,a.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Event Info"}),(0,a.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Punch Times"}),(0,a.jsx)("th",{className:"px-6 py-4 font-semibold",children:"Location Status"}),(0,a.jsx)("th",{className:"px-6 py-4 font-semibold text-center",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:U.map((e,t)=>{let s=P(e.event_id),r=e.name||N(e,"user_id.name","N/A"),l=e.enrollment_id||N(e,"user_id.enrollment_id","N/A"),n=e.branch||N(e,"user_id.branch","N/A"),i=e.year||N(e,"user_id.year","N/A"),o=v(e.punch_in_time),d=v(e.punch_out_time),c=Array.isArray(e.locations)?e.locations:[],m=F(c);return(0,a.jsxs)("tr",{className:"bg-white hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-bold text-gray-900",children:r}),(0,a.jsxs)("span",{className:"text-xs text-gray-400",children:[l," • ",n," (",i,")"]})]})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded-md text-xs font-medium border border-blue-100",children:s})}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1 text-xs",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-10 text-gray-400 font-medium",children:"IN"}),(0,a.jsx)("span",{className:"font-mono text-gray-700",children:o?o.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"w-10 text-gray-400 font-medium",children:"OUT"}),(0,a.jsx)("span",{className:"font-mono text-gray-700",children:d?d.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:["in"===m&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[(0,a.jsx)(j.MapPin,{})," ≤500m"]}),"out"===m&&(0,a.jsxs)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[(0,a.jsx)(j.MapPin,{})," >500m"]}),"single"===m&&(0,a.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Pending Out"}),"no-locations"===m&&(0,a.jsx)("span",{className:"inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-500",children:"No GPS"})]}),(0,a.jsx)("div",{className:"text-[10px] text-gray-400 mt-1 truncate max-w-[150px]",children:c[0]?"".concat(Number(c[0].lat).toFixed(4),", ").concat(Number(c[0].long).toFixed(4)):""})]}),(0,a.jsx)("td",{className:"px-6 py-4 text-center",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold border\n                                ".concat("Present"===e.status?"bg-emerald-50 text-emerald-600 border-emerald-200":"bg-rose-50 text-rose-600 border-rose-200","\n                            "),children:e.status||"Unknown"})})]},e._id||t)})})]})}),0===D.length&&(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[(0,a.jsx)("svg",{className:"w-12 h-12 mb-3 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsx)("p",{children:"No attendance records match your filters."})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-gray-100 bg-gray-50",children:[(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Showing ",(0,a.jsxs)("span",{className:"font-semibold text-gray-900",children:[T+1,"-",Math.min(O,D.length)]})," of ",(0,a.jsx)("span",{className:"font-semibold text-gray-900",children:D.length})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>E>1&&M(e=>e-1),disabled:1===E,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,a.jsx)("button",{onClick:()=>E<I&&M(e=>e+1),disabled:E===I,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})})]})};var S=s(7634),A=s(2838),C=s(5526),_=s(4416),L=s(7924),E=s(6474),M=s(646),z=s(3500),B=s(7325),P=s(4186),F=s(4516);let R=[{name:"Nagar Auditorium",lat:"22.381599362662463",long:"73.14314073548469"},{name:"SOT Auditorium",lat:"22.385636040754616",long:"73.14493074913331"},{name:"Anviksha Building",lat:"22.3862105355751",long:"73.14561660211221"},{name:"SOS Building",lat:"22.382901016778522",long:"73.14696416837283"},{name:"Aangava",lat:"22.385277259337578",long:"73.14446294649058"},{name:"Basket Ball Court ( Aangava )",lat:"22.385232418863385",long:"73.14407034812744"}],D=e=>{let{icon:t,className:s="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[t&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(t,{size:18})}),(0,a.jsx)("input",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(t?"pl-10":""," transition-all duration-200 ").concat(s)})]})},O=e=>{let{icon:t,className:s="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[t&&(0,a.jsx)("div",{className:"absolute top-3 left-0 pl-3 pointer-events-none text-gray-400",children:(0,a.jsx)(t,{size:18})}),(0,a.jsx)("textarea",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(t?"pl-10":""," transition-all duration-200 ").concat(s)})]})};function T(e){let{items:t,display:s,value:r,onChange:l,placeholder:i="Search...",multiple:o=!1}=e,[d,c]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),u=(0,n.useRef)(null),g=e=>s(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim(),h=(0,n.useMemo)(()=>{let e=d.toLowerCase().trim();return t.filter(t=>!(o&&Array.isArray(r)&&r.includes(t._id))&&(!e||(g(t)||"").toLowerCase().includes(e)))},[t,d,s,r,o]),p=(0,n.useMemo)(()=>{if(o)return"";let e=t.find(e=>r&&(null==e?void 0:e._id)===r);return e?g(e):""},[t,r,s,o]);return(0,a.jsxs)("div",{className:"relative group",children:[o&&Array.isArray(r)&&r.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3 p-2 bg-indigo-50 border border-indigo-100 rounded-lg",children:r.map(e=>{let s=t.find(t=>t._id===e);return s?(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-white border border-indigo-200 text-indigo-700 text-xs font-medium shadow-sm transition-all hover:shadow-md",children:[g(s),(0,a.jsx)("button",{type:"button",onClick:t=>{t.preventDefault(),t.stopPropagation(),o&&Array.isArray(r)&&(null==l||l(r.filter(t=>t!==e)))},className:"ml-2 p-0.5 rounded-full hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 focus:outline-none transition-colors",children:(0,a.jsx)(_.A,{size:12})})]},e):null})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(L.A,{size:18})}),(0,a.jsx)("input",{ref:u,type:"text",placeholder:p||i,value:o||m?d:p,onChange:e=>c(e.target.value),onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),200),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block transition-all shadow-sm"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(E.A,{size:16})})]}),m&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100",children:[0===h.length&&(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center italic",children:"No matching speakers found"}),h.map(e=>{let t=g(e);return(0,a.jsxs)("button",{type:"button",className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors flex items-center gap-2 border-b border-gray-50 last:border-0",onClick:()=>(e=>{if(o){var t;let s=Array.isArray(r)?r:[];s.includes(e)||null==l||l([...s,e]),c(""),null==(t=u.current)||t.focus()}else null==l||l(e),x(!1),c("")})(e._id),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-400"}),t]},e._id)})]})]})}function U(){let[e,t]=(0,n.useState)(!1),[s,r]=(0,n.useState)(""),[l,d]=(0,n.useState)([]),[c,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[p,b]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{d(await (0,f.Pq)()||[])})()},[]);let j=async e=>{if(e.preventDefault(),0===c.length)return void i.oR.error("Please select at least one speaker");t(!0);try{await (0,f.lh)(e,()=>i.oR.success("Event created successfully!"),e=>i.oR.error((null==e?void 0:e.message)||"Failed to create event")),e.target.reset(),r(""),m([]),u(""),h(""),b("")}finally{t(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 py-10 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 text-center sm:text-left",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Create New Event"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Fill in the details below to schedule a new session."})]}),(0,a.jsx)("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-2xl overflow-hidden border border-gray-100",children:(0,a.jsxs)("form",{id:"createEvent",onSubmit:j,className:"p-6 sm:p-10 space-y-8",children:[(0,a.jsx)("input",{type:"hidden",name:"speaker_ids",value:c.join(",")||""}),(0,a.jsx)("input",{type:"hidden",name:"banner_url",value:s||""}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Event Banner"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:bg-gray-100 transition-colors text-center min-h-[200px] flex flex-col items-center justify-center",children:[(0,a.jsx)(C.default,{onUploadSuccess:r}),s?(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-md",children:[(0,a.jsx)(M.A,{size:12,className:"mr-1"})," Image Ready"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400 mt-2",children:"Recommended: 16:9 Aspect Ratio"})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-100",children:[(0,a.jsx)("div",{className:"flex items-center h-5",children:(0,a.jsx)("input",{id:"mandatory",name:"mandatory",type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),(0,a.jsxs)("div",{className:"ml-3 text-sm",children:[(0,a.jsx)("label",{htmlFor:"mandatory",className:"font-medium text-blue-900",children:"Mandatory Attendance"}),(0,a.jsx)("p",{className:"text-blue-700/70 text-xs",children:"Students must attend this event"})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Event Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(D,{id:"title",name:"title",required:!0,placeholder:"e.g. Introduction to Next.js",icon:z.A,className:"text-lg font-medium"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"detail",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,a.jsx)(O,{id:"detail",name:"detail",rows:3,placeholder:"Brief overview of the event...",icon:B.A})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"objectives",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Objectives ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(O,{id:"objectives",name:"objectives",required:!0,rows:3,placeholder:"• Objective 1 • Objective 2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"learning_outcomes",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Learning Outcomes ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(O,{id:"learning_outcomes",name:"learning_outcomes",required:!0,rows:3,placeholder:"• Outcome 1 • Outcome 2"})]})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(P.A,{className:"mr-2 text-indigo-500",size:20})," Schedule"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"start_time",className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Starts"}),(0,a.jsx)("input",{type:"datetime-local",id:"start_time",name:"start_time",required:!0,className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"end_time",className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Ends"}),(0,a.jsx)("input",{type:"datetime-local",id:"end_time",name:"end_time",required:!0,className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(F.A,{className:"mr-2 text-indigo-500",size:20})," Venue Details"]}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{id:"address",name:"address",required:!0,value:x,onChange:e=>{let t=e.target.value;u(t);let s=R.find(e=>e.name===t);s?(h(s.lat),b(s.long)):(h(""),b(""))},className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 mb-3",children:[(0,a.jsx)("option",{value:"",children:"-- Select Venue --"}),R.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.name))]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number",id:"lat",name:"lat",step:"any",value:g,onChange:e=>h(e.target.value),placeholder:"Latitude",className:"w-full bg-gray-100 text-gray-500 border-0 rounded-lg p-2 text-xs font-mono",readOnly:!!g})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{type:"number",id:"long",name:"long",step:"any",value:p,onChange:e=>b(e.target.value),placeholder:"Longitude",className:"w-full bg-gray-100 text-gray-500 border-0 rounded-lg p-2 text-xs font-mono",readOnly:!!p})})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center mb-4",children:[(0,a.jsx)(o.A,{className:"mr-2 text-indigo-500",size:20})," Speakers"]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Guest Speakers"}),(0,a.jsx)(T,{items:l,value:c,onChange:m,multiple:!0,placeholder:"Search speaker name...",display:e=>(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()}),(0,a.jsxs)("div",{className:"mt-2 flex justify-between items-center text-xs text-gray-500",children:[(0,a.jsx)("span",{children:"Search and select multiple speakers"}),(0,a.jsxs)("span",{className:c.length>0?"text-indigo-600 font-semibold":"",children:[c.length," Selected"]})]})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:e,className:"w-full flex justify-center py-4 px-4 border border-transparent rounded-xl shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.99]",children:e?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Event..."]}):"Create Event"})})]})})]}),(0,a.jsx)(i.ToastContainer,{position:"bottom-right",theme:"colored"})]})}var I=s(5028),q=s(1007),V=s(8136),W=s(1264),G=s(2486),H=s(232),Y=s(2919),J=s(8749),$=s(2657),Q=s(1284),Z=s(8164);let K=(0,I.default)(()=>Promise.resolve().then(s.bind(s,5526)),{loadableGenerated:{webpack:()=>[5526]},ssr:!1}),X=e=>{let{icon:t,className:s="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[t&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(t,{size:18})}),(0,a.jsx)("input",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(t?"pl-10":""," transition-all duration-200 ").concat(s)})]})},ee=e=>{let{icon:t,className:s="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[t&&(0,a.jsx)("div",{className:"absolute top-3 left-0 pl-3 pointer-events-none text-gray-400",children:(0,a.jsx)(t,{size:18})}),(0,a.jsx)("textarea",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(t?"pl-10":""," transition-all duration-200 ").concat(s)})]})};function et(){let[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(0),[m,x]=(0,n.useState)(!1),u={style:{background:"#10B981",color:"white"}},g={style:{background:"#EF4444",color:"white"}},h={style:{background:"#F59E0B",color:"white"}};(0,n.useEffect)(()=>{if(d>0){let e=setTimeout(()=>c(e=>e-1),1e3);return()=>clearTimeout(e)}},[d]);let p=async e=>{if(!e.trim())return void i.oR.warning("Enter email first!",h);x(!0);try{let t=await (0,f.A$)(e,"verification");(null==t?void 0:t.success)?(i.oR.success("OTP sent!",u),c(15)):i.oR.error((null==t?void 0:t.message)||"Failed to send OTP!",g)}catch(e){i.oR.error("Error sending OTP!",g)}finally{x(!1)}},b=async s=>{s.preventDefault(),o(!0);let a=new FormData(s.target);return(console.log(Object.entries(a.entries())),e)?(a.get("password")||"").length<8?(i.oR.warning("Password must be at least 8 characters!",h),o(!1)):a.get("otp")?void(await (0,f.DY)({preventDefault:()=>{},target:s.target,submitter:s.nativeEvent.submitter},e=>{i.oR.success((null==e?void 0:e.message)||"Speaker registered!",u),s.target.reset(),t(""),c(0)},e=>i.oR.error((null==e?void 0:e.message)||"Failed to register speaker!",g)),o(!1)):(i.oR.warning("OTP required!",h),o(!1)):(i.oR.warning("Upload a speaker image!",h),o(!1))};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 py-10 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Register New Speaker"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Create a profile for a guest speaker or lecturer."})]}),(0,a.jsxs)("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-2xl overflow-hidden border border-gray-100 p-6 sm:p-10",children:[(0,a.jsx)("div",{className:"flex flex-col items-center mb-8",children:(0,a.jsxs)("div",{className:"w-full max-w-sm",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2 text-center",children:"Speaker Photo"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:bg-gray-100 transition-colors flex flex-col items-center justify-center min-h-[160px]",children:[(0,a.jsx)(K,{onUploadSuccess:t}),e?(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-md",children:[(0,a.jsx)(M.A,{size:12,className:"mr-1"})," Image Uploaded"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400 mt-2",children:"Upload profile picture"})]})]})}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsx)("input",{name:"role",type:"text",value:"Speaker",hidden:!0,readOnly:!0}),(0,a.jsx)("input",{name:"imageUrl",type:"text",value:e,hidden:!0,readOnly:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-100 pb-2",children:"Personal Details"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,a.jsx)(X,{name:"name",placeholder:"e.g. Dr. John Doe",icon:q.A,required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),(0,a.jsx)(X,{name:"nickname",placeholder:"Alias"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{name:"gender",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 appearance-none",children:[(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization"}),(0,a.jsx)(X,{name:"organization",placeholder:"University or Company Name",icon:V.A})]})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-100 pb-2",children:"Account Security"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Verification"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(W.A,{size:18})}),(0,a.jsx)("input",{name:"email",type:"email",placeholder:"email@example.com",className:"w-full pl-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]}),(0,a.jsx)("button",{type:"button",disabled:d>0||m,onClick:()=>p(document.querySelector("input[name='email']").value),className:"px-4 py-2 rounded-lg text-sm font-medium text-white shadow-sm transition-all flex items-center whitespace-nowrap ".concat(d>0?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:scale-95"),children:m?(0,a.jsx)("span",{className:"animate-pulse",children:"Sending..."}):d>0?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-4 text-center",children:d}),"s"]}):(0,a.jsxs)(a.Fragment,{children:["Send OTP ",(0,a.jsx)(G.A,{size:14,className:"ml-1"})]})})]}),(0,a.jsx)(X,{name:"otp",placeholder:"Enter 6-digit OTP",icon:H.A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(Y.A,{size:18})}),(0,a.jsx)("input",{type:s?"text":"password",name:"password",placeholder:"Min 8 characters",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 pl-10 pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(e=>!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 cursor-pointer",children:s?(0,a.jsx)(J.A,{size:18}):(0,a.jsx)($.A,{size:18})})]})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100 my-2"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"About Speaker"}),(0,a.jsx)(ee,{name:"about",placeholder:"Brief bio or description...",icon:Q.A,rows:4})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Links"}),(0,a.jsx)(ee,{name:"links",placeholder:"https://linkedin.com/in/xyz, https://website.com",icon:Z.A,rows:4}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 text-right",children:"Separate multiple links with commas"})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.99]",children:l?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Registering..."]}):"Register Speaker"})})]})]})]}),(0,a.jsx)(i.ToastContainer,{autoClose:2e3,hideProgressBar:!0,theme:"colored",position:"bottom-right"})]})}var es=s(2502),ea=s(4065),er=s(2834);es.t1.register(es.PP,es.kc,es.E8,es.hE,es.m_,es.s$,es.Bs,er.A);let el={"school-branch":{"School of Technology":["B.Tech.","BCA"],"School of Science":["B.Sc."],"School of Management Studies and Liberal Arts":["B.Com.","BBA"]},"branch-stream":{"B.Tech.":["Chemical","Chemical D2D","Computer Science & Engg.","Computer Science & Engg. D2D","Fire & EHS","Fire & EHS. D2D"],BCA:["General"],"B.Sc.":["Biotechnology","Chemistry","Data Science","Micro Biology"],"B.Com.":["/ B.Com (Hons.)"],BBA:["Business Analytics","HR / Marketing /Accounting & Finance / IT Mg"]}},en={primary:["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981"],status:{present:"#10B981",absent:"#EF4444",late:"#F59E0B",exc:"#3B82F6"},geo:["#10B981","#EF4444","#9CA3AF"]},ei=e=>(e&&"object"==typeof e?e._id:e)||"",eo=(e,t,s)=>{try{var a;return null!=(a=t.split(".").reduce((e,t)=>e?e[t]:void 0,e))?a:s}catch(e){return s}},ed=n.memo(e=>{let{title:t,value:s,subtext:r,color:l="blue"}=e;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-".concat(l,"-500 hover:shadow-md transition-shadow"),children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs uppercase font-bold tracking-wider",children:t}),(0,a.jsxs)("div",{className:"flex items-end justify-between mt-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:s}),r&&(0,a.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:r})]})]})}),ec=n.memo(e=>{var t;let{options:s,value:r,onChange:l,placeholder:i="Select Item",disabled:o=!1}=e,[d,c]=(0,n.useState)(!1),[m,x]=(0,n.useState)(""),u=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let g=(0,n.useMemo)(()=>s.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())),[s,m]),h=(null==(t=s.find(e=>ei(e)===r))?void 0:t.title)||i;return(0,a.jsxs)("div",{className:"relative w-full ".concat(o?"opacity-60 pointer-events-none":""),ref:u,children:[(0,a.jsxs)("div",{className:"border border-gray-200 p-2.5 rounded-lg bg-white cursor-pointer flex justify-between items-center h-[42px] hover:border-blue-400 transition-colors",onClick:()=>{c(!d),x("")},children:[(0,a.jsx)("span",{className:"truncate text-sm ".concat(r?"text-gray-700 font-medium":"text-gray-400"),children:h}),(0,a.jsx)("span",{className:"text-gray-400 text-xs",children:"▼"})]}),d&&(0,a.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-100 rounded-lg shadow-xl z-50 max-h-60 overflow-hidden flex flex-col animate-in fade-in zoom-in duration-75",children:[(0,a.jsx)("input",{autoFocus:!0,type:"text",placeholder:"Search...",className:"p-2 border-b w-full outline-none text-sm bg-gray-50 text-gray-700",value:m,onChange:e=>x(e.target.value)}),(0,a.jsxs)("div",{className:"overflow-y-auto",children:[(0,a.jsx)("div",{className:"p-2 hover:bg-red-50 cursor-pointer text-red-500 text-xs font-bold border-b",onClick:()=>{l(""),c(!1)},children:"RESET SELECTION"}),g.length>0?g.map(e=>(0,a.jsx)("div",{className:"p-2 text-sm hover:bg-blue-50 cursor-pointer truncate ".concat(ei(e)===r?"bg-blue-50 text-blue-700 font-semibold":"text-gray-600"),onClick:()=>{l(ei(e)),c(!1)},children:e.title},ei(e))):(0,a.jsx)("div",{className:"p-2 text-gray-400 text-xs text-center",children:"No results"})]})]})]})}),em=()=>{let[e,t]=(0,n.useState)([]),[s,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)({event:"",school:"",degree:"",stream:"",year:""}),[c,m]=(0,n.useState)(null),x=(0,n.useCallback)((e,t)=>{d(s=>{let a={...s,[e]:t};return"school"===e&&(a.degree="",a.stream=""),"degree"===e&&(a.stream=""),a})},[]);(0,n.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([fetch("".concat(f.AS,"/api/events")),new Promise(e=>(0,f.Yq)({},e))]),a=await e.json();r(a.events||[]);let l=(Array.isArray(null==s?void 0:s.data)?s.data:[]).map(e=>{var t,s,a,r,l,n,i,o;let d=e.branch||eo(e,"user_id.branch","Unknown"),{school:c,degree:m,stream:x}=(e=>{if(!e)return{school:"Other",degree:"Other",stream:"Unknown"};let t=e.trim();for(let[e,s]of Object.entries(el["school-branch"]))for(let a of s)if(t.includes(a)){let s=t.replace(a,"").replace(/^[\.\/\-\s]+/,"").trim();if(el["branch-stream"][a]){let e=el["branch-stream"][a].find(e=>s.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(s.toLowerCase()));e&&(s=e)}return{school:e,degree:a,stream:s||"General"}}return{school:"Other",degree:"Other",stream:t}})(d);return{...e,school:c,degree:m,stream:x,year:(e.year||eo(e,"user_id.year","Unknown")).toString(),eventId:ei(e.event_id),dist:((e,t,s,a)=>{if(!e||!t||!s||!a)return null;let r=e=>e*Math.PI/180,l=Math.sin(r(s-e)/2)**2+Math.cos(r(e))*Math.cos(r(s))*Math.sin(r(a-t)/2)**2;return 12742e3*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))})(null==(s=e.locations)||null==(t=s[0])?void 0:t.lat,null==(r=e.locations)||null==(a=r[0])?void 0:a.long,null==(n=e.locations)||null==(l=n.at(-1))?void 0:l.lat,null==(o=e.locations)||null==(i=o.at(-1))?void 0:i.long)}});t(l)}catch(e){console.error("Data Load Error:",e)}finally{i(!1)}})()},[]);let u=(0,n.useMemo)(()=>{let e=Object.keys(el["school-branch"]),t=[];o.school?t=el["school-branch"][o.school]||[]:e.forEach(e=>t.push(...el["school-branch"][e]));let a=[];return o.degree&&el["branch-stream"][o.degree]&&(a=el["branch-stream"][o.degree]),{events:s,schools:e.map(e=>({_id:e,title:e})),degrees:[...new Set(t)].map(e=>({_id:e,title:e})),streams:[...new Set(a)].map(e=>({_id:e,title:e}))}},[o.school,o.degree,s]),g=(0,n.useMemo)(()=>e.filter(e=>(!o.event||e.eventId===o.event)&&(!o.school||e.school===o.school)&&(!o.degree||e.degree===o.degree)&&(!o.stream||e.stream===o.stream)&&(!o.year||e.year.includes(o.year))),[e,o]),h=(0,n.useMemo)(()=>{let e=g.reduce((e,t)=>(e.total++,"Present"===t.status&&e.present++,e.status[t.status||"Unknown"]=(e.status[t.status||"Unknown"]||0)+1,e.school[t.school]=(e.school[t.school]||0)+1,e.degree[t.degree]=(e.degree[t.degree]||0)+1,e.stream[t.stream]=(e.stream[t.stream]||0)+1,null===t.dist?e.distance.unknown++:t.dist<=500?e.distance.valid++:e.distance.invalid++,e),{status:{},school:{},degree:{},stream:{},distance:{valid:0,invalid:0,unknown:0},total:0,present:0}),t=(e,t)=>{let s=Object.keys(e).sort((t,s)=>e[s]-e[t]);return{labels:s,datasets:[{data:s.map(t=>e[t]),backgroundColor:"function"==typeof t?e=>t(e,s):t,borderRadius:4,barPercentage:.6}]}};return{metrics:{total:e.total,present:e.present,percentage:e.total>0?(e.present/e.total*100).toFixed(1):"0.0"},charts:{status:t(e.status,[en.status.present,en.status.absent,en.status.late,en.status.exc]),school:t(e.school,en.primary),degree:t(e.degree,en.primary[1]),stream:t(e.stream,(e,t)=>(t[e.dataIndex]||"").includes("D2D")?"#F97316":"#0EA5E9"),distance:{labels:["In Range (≤500m)","Out of Range (>500m)","Unknown"],datasets:[{data:[e.distance.valid,e.distance.invalid,e.distance.unknown],backgroundColor:en.geo,borderWidth:0}]}}}},[g]),p=(e,t)=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"horizontal"===t?"y":"x",plugins:{legend:{display:"pie"===t||"doughnut"===t,position:"right",labels:{boxWidth:10,usePointStyle:!0}},title:{display:!!e,text:e,font:{size:14,weight:"bold"}},datalabels:{color:"pie"===t||"doughnut"===t?"#fff":"#374151",font:{weight:"bold",size:10},anchor:"end",align:"horizontal"===t?"end":"top",formatter:e=>e>0?e:""}},scales:"pie"===t||"doughnut"===t?{x:{display:!1},y:{display:!1}}:{x:{grid:{display:!1},ticks:{display:"horizontal"!==t}},y:{grid:{color:"#f3f4f6"},beginAtZero:!0}}});return l?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-slate-50",children:(0,a.jsxs)("div",{className:"flex flex-col items-center animate-pulse",children:[(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-full mb-3"}),(0,a.jsx)("div",{className:"h-4 w-32 bg-gray-200 rounded"})]})}):(0,a.jsxs)("div",{className:"p-6 bg-slate-50 min-h-screen font-sans",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-800 tracking-tight",children:"Academic Analytics"}),(0,a.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Real-time attendance insights & demographics"})]}),(0,a.jsxs)("div",{className:"text-right hidden md:block",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:new Date().toLocaleTimeString()})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(ed,{title:"Total Records",value:h.metrics.total,subtext:"Filtered students",color:"blue"}),(0,a.jsx)(ed,{title:"Presence",value:"".concat(h.metrics.percentage,"%"),subtext:"".concat(h.metrics.present," Present"),color:"emerald"}),(0,a.jsx)(ed,{title:"Location Valid",value:h.charts.distance.datasets[0].data[0],subtext:"In 500m Range",color:"purple"}),(0,a.jsx)(ed,{title:"Departments",value:h.charts.degree.labels.length,subtext:"Active Degrees",color:"amber"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-slate-200 mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,a.jsx)(ec,{options:u.events,value:o.event,onChange:e=>x("event",e),placeholder:"All Events"}),(0,a.jsx)(ec,{options:u.schools,value:o.school,onChange:e=>x("school",e),placeholder:"All Schools"}),(0,a.jsx)(ec,{options:u.degrees,value:o.degree,onChange:e=>x("degree",e),placeholder:"All Degrees",disabled:!o.school}),(0,a.jsx)(ec,{options:u.streams,value:o.stream,onChange:e=>x("stream",e),placeholder:"All Streams",disabled:!o.degree}),(0,a.jsx)("input",{className:"border border-gray-200 p-2.5 rounded-lg text-sm w-full outline-none focus:border-blue-400 bg-white",placeholder:"Year (e.g. 2025)",value:o.year,onChange:e=>x("year",e.target.value)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[[{key:"status",title:"Attendance Status",type:"pie"},{key:"school",title:"School Distribution",type:"bar"},{key:"degree",title:"Degree Distribution",type:"bar"},{key:"distance",title:"Location Validity",type:"doughnut"}].map(e=>(0,a.jsxs)("div",{onClick:()=>m(e),className:"bg-white p-5 rounded-xl shadow-sm border border-slate-100 hover:shadow-lg transition-all cursor-pointer group flex flex-col h-80",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-700",children:e.title}),(0,a.jsx)("span",{className:"text-xs text-blue-500 bg-blue-50 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Expand"})]}),(0,a.jsxs)("div",{className:"flex-grow relative",children:["pie"===e.type&&(0,a.jsx)(ea.Fq,{data:h.charts[e.key],options:p(null,"pie")}),"doughnut"===e.type&&(0,a.jsx)(ea.nu,{data:h.charts[e.key],options:p(null,"doughnut")}),"bar"===e.type&&(0,a.jsx)(ea.yP,{data:h.charts[e.key],options:p(null,"bar")})]})]},e.key)),(0,a.jsxs)("div",{onClick:()=>m({key:"stream",title:"Stream Analysis",type:"horizontal"}),className:"bg-white p-5 rounded-xl shadow-sm border border-slate-100 hover:shadow-lg transition-all cursor-pointer group md:col-span-2 h-80 flex flex-col",children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-700",children:"Detailed Stream Breakdown"}),(0,a.jsx)("span",{className:"text-xs text-blue-500 bg-blue-50 px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:"Expand"})]}),(0,a.jsx)("div",{className:"flex-grow relative",children:(0,a.jsx)(ea.yP,{data:h.charts.stream,options:p(null,"horizontal")})})]})]}),(()=>{if(!c)return null;let{key:e,title:t,type:s}=c,r="horizontal"===s||"bar"===s?ea.yP:"doughnut"===s?ea.nu:ea.Fq;return(0,a.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/70 backdrop-blur-sm p-4 animate-in fade-in duration-200",onClick:()=>m(null),children:(0,a.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-2xl w-full max-w-6xl h-[80vh] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4 border-b pb-4",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:t}),(0,a.jsx)("button",{onClick:()=>m(null),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500",children:"✕"})]}),(0,a.jsx)("div",{className:"flex-grow relative",children:(0,a.jsx)(r,{data:h.charts[e],options:p(null,s)})})]})})})()]})};var ex=s(6427);let eu=()=>{let[e,t]=(0,n.useState)("attendance"),[s,r]=(0,n.useState)(!1),[j,v]=(0,n.useState)("Teacher Dashboard"),y=[{id:"attendance",label:"Attendance",icon:o.A},{id:"classroom",label:"Classroom Live",icon:d.A},{id:"events",label:"All Events",icon:c.A},{id:"create-event",label:"Create Event",icon:m.A},{id:"create-speaker",label:"Register Speaker",icon:x.A},{id:"charts",label:"Analytics",icon:u.A},{id:"profile",label:"Profile",icon:g.A}];return(0,n.useEffect)(()=>{(async()=>{let e=await (0,f.VU)();e&&v(e.name||e.firstName||"Teacher")})()},[]),(0,n.useEffect)(()=>{let e=sessionStorage.getItem("teacherActiveTab");e&&(t(e),"classroom"===e&&(r(!0),setTimeout(()=>{r(!1)},2e3)))},[]),(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 min-h-screen bg-slate-50 font-sans text-slate-800",children:[(0,a.jsx)("header",{className:"jsx-27c8e4e60601fa70 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 bg-indigo-600 p-2 rounded-lg",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h1",{className:"jsx-27c8e4e60601fa70 text-xl md:text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent hidden sm:block",children:j}),(0,a.jsx)("h1",{className:"jsx-27c8e4e60601fa70 text-lg font-bold text-indigo-700 sm:hidden",children:"Dashboard"})]}),(0,a.jsxs)("button",{onClick:f.eg.handler(()=>{sessionStorage.clear(),window.location.href="/LoginSignUp"},e=>console.error(e)),className:"jsx-27c8e4e60601fa70 group flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-full transition-all duration-300",children:[(0,a.jsx)("span",{className:"jsx-27c8e4e60601fa70 hidden sm:block",children:"Logout"}),(0,a.jsx)(b.A,{className:"h-5 w-5 group-hover:rotate-180 transition-transform duration-500"})]})]})})}),(0,a.jsxs)("main",{className:"jsx-27c8e4e60601fa70 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 mb-8",children:(0,a.jsx)("nav",{"aria-label":"Tabs",className:"jsx-27c8e4e60601fa70 flex space-x-2 overflow-x-auto pb-4 sm:pb-0 sm:flex-wrap sm:justify-start scrollbar-hide",children:y.map(s=>{let l=s.icon,n=e===s.id;return(0,a.jsxs)("button",{onClick:()=>(s=>{s!==e&&("classroom"===s?(sessionStorage.setItem("teacherActiveTab","classroom"),window.location.reload()):(sessionStorage.setItem("teacherActiveTab",s),t(s),r(!1)))})(s.id),className:"jsx-27c8e4e60601fa70 "+"\n                    flex items-center gap-2 px-5 py-3 text-sm font-medium rounded-xl whitespace-nowrap transition-all duration-200\n                    ".concat(n?"bg-indigo-600 text-white shadow-md shadow-indigo-200 translate-y-[-2px]":"bg-white text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 border border-transparent hover:border-indigo-100","\n                  "),children:[(0,a.jsx)(l,{className:"jsx-27c8e4e60601fa70 "+"h-4 w-4 ".concat(n?"text-indigo-100":"text-slate-400")}),s.label]},s.id)})})}),(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 bg-white rounded-2xl shadow-xl border border-slate-100 min-h-[600px] relative overflow-hidden",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 p-4 sm:p-6 lg:p-8",children:(()=>{if(s)return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-[50vh] text-indigo-600",children:[(0,a.jsx)(h.A,{className:"h-16 w-16 animate-spin mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-medium text-slate-600 animate-pulse",children:"Connecting to Live Classroom..."})]});switch(e){case"attendance":return(0,a.jsx)(k,{});case"classroom":return(0,a.jsx)(S.A,{});case"events":return(0,a.jsx)(A.default,{});case"create-event":return(0,a.jsx)(U,{});case"create-speaker":return(0,a.jsx)(et,{});case"charts":return(0,a.jsx)(em,{});case"profile":return(0,a.jsx)(ex.A,{});default:return(0,a.jsx)("div",{className:"text-gray-500 text-center mt-10",children:"Select an option from the tabs."})}})()})]})]}),(0,a.jsx)(i.ToastContainer,{position:"bottom-right",theme:"colored"}),(0,a.jsx)(l(),{id:"27c8e4e60601fa70",children:".scrollbar-hide.jsx-27c8e4e60601fa70::-webkit-scrollbar{display:none}.scrollbar-hide.jsx-27c8e4e60601fa70{-ms-overflow-style:none;scrollbar-width:none}"})]})}},5526:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var a=s(5155),r=s(2115),l=s(8637),n=s.n(l),i=s(5799),o=s(2105),d=s(2337),c=s(4416),m=s(5196),x=s(1154),u=s(7213);let g=e=>{let{onUploadSuccess:t}=e,[s,l]=(0,r.useState)(null),[n,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),b=e=>{g(e.url),t(e.url),p(!1),i.oR.success("Image uploaded successfully!")},f=e=>{p(!1),i.oR.error("Image upload failed: "+e.message),console.error("Error uploading image:",e)};return(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!s)return void i.oR.error("Please select a file first.");p(!0),o.QM.handler(b,f)(e)},className:"w-full",children:[s?(0,a.jsxs)("div",{className:"relative w-full h-48 rounded-xl overflow-hidden border border-gray-200 group bg-gray-100",children:[(0,a.jsx)("img",{src:s,alt:"Preview",className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"}),!h&&!n&&(0,a.jsx)("button",{type:"button",onClick:()=>{s&&URL.revokeObjectURL(s),l(null),g(""),t("")},className:"absolute top-2 right-2 p-1.5 bg-white/90 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-full shadow-sm backdrop-blur-sm transition-all transform hover:scale-105",title:"Remove image",children:(0,a.jsx)(c.A,{size:18})}),n&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-[2px]",children:(0,a.jsxs)("div",{className:"bg-green-500 text-white px-4 py-2 rounded-full flex items-center shadow-lg font-medium text-sm animate-in zoom-in",children:[(0,a.jsx)(m.A,{size:16,className:"mr-2"})," Upload Complete"]})})]}):(0,a.jsxs)("label",{htmlFor:"eventImage",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-indigo-50 hover:border-indigo-400 transition-all duration-200 group",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-indigo-500"})}),(0,a.jsx)("p",{className:"mb-1 text-sm text-gray-700 font-medium",children:(0,a.jsx)("span",{className:"font-semibold text-indigo-600",children:"Click to upload"})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"SVG, PNG, JPG or GIF"})]}),(0,a.jsx)("input",{type:"file",id:"eventImage",name:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(l(URL.createObjectURL(t)),g(""))},disabled:h,className:"hidden"})]}),s&&!n&&(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full mt-3 flex items-center justify-center py-2.5 px-4 rounded-lg text-sm font-medium text-white transition-all shadow-sm ".concat(h?"bg-indigo-400 cursor-wait":"bg-indigo-600 hover:bg-indigo-700 hover:shadow-md active:scale-95"),children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{size:16,className:"animate-spin mr-2"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{size:16,className:"mr-2"}),"Confirm & Upload"]})}),n&&(0,a.jsx)("input",{type:"hidden",name:"image_url",value:n})]})};g.propTypes={onUploadSuccess:n().func.isRequired};let h=g},6916:(e,t,s)=>{Promise.resolve().then(s.bind(s,3327))}},e=>{e.O(0,[797,647,726,311,766,874,856,653,105,838,244,441,964,358],()=>e(e.s=6916)),_N_E=e.O()}]);