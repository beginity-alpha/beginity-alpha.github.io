(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{3104:(e,s,t)=>{Promise.resolve().then(t.bind(t,8817))},5526:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(5155),r=t(2115),l=t(8637),n=t.n(l),i=t(5799),o=t(2105),d=t(2337),c=t(4416),m=t(5196),x=t(1154),u=t(7213);let g=e=>{let{onUploadSuccess:s}=e,[t,l]=(0,r.useState)(null),[n,g]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),b=e=>{g(e.url),s(e.url),p(!1),i.oR.success("Image uploaded successfully!")},f=e=>{p(!1),i.oR.error("Image upload failed: "+e.message),console.error("Error uploading image:",e)};return(0,a.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!t)return void i.oR.error("Please select a file first.");p(!0),o.QM.handler(b,f)(e)},className:"w-full",children:[(0,a.jsx)("input",{type:"file",id:"eventImage",name:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];s&&(l(URL.createObjectURL(s)),g(""))},disabled:h,className:"hidden"}),t?(0,a.jsxs)("div",{className:"relative w-full h-48 rounded-xl overflow-hidden border border-gray-200 group bg-gray-100",children:[(0,a.jsx)("img",{src:t,alt:"Preview",className:"w-full h-full object-cover"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/10 transition-colors"}),!h&&!n&&(0,a.jsx)("button",{type:"button",onClick:()=>{t&&URL.revokeObjectURL(t),l(null),g(""),s("");let e=document.getElementById("eventImage");e&&(e.value="")},className:"absolute top-2 right-2 p-1.5 bg-white/90 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-full shadow-sm backdrop-blur-sm transition-all transform hover:scale-105",title:"Remove image",children:(0,a.jsx)(c.A,{size:18})}),n&&(0,a.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-black/40 backdrop-blur-[2px]",children:(0,a.jsxs)("div",{className:"bg-green-500 text-white px-4 py-2 rounded-full flex items-center shadow-lg font-medium text-sm animate-in zoom-in",children:[(0,a.jsx)(m.A,{size:16,className:"mr-2"})," Upload Complete"]})})]}):(0,a.jsx)("label",{htmlFor:"eventImage",className:"flex flex-col items-center justify-center w-full h-48 border-2 border-gray-300 border-dashed rounded-xl cursor-pointer bg-gray-50 hover:bg-indigo-50 hover:border-indigo-400 transition-all duration-200 group",children:(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[(0,a.jsx)("div",{className:"p-3 bg-white rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform",children:(0,a.jsx)(d.A,{className:"w-8 h-8 text-indigo-500"})}),(0,a.jsx)("p",{className:"mb-1 text-sm text-gray-700 font-medium",children:(0,a.jsx)("span",{className:"font-semibold text-indigo-600",children:"Click to upload"})}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"SVG, PNG, JPG or GIF"})]})}),t&&!n&&(0,a.jsx)("button",{type:"submit",disabled:h,className:"w-full mt-3 flex items-center justify-center py-2.5 px-4 rounded-lg text-sm font-medium text-white transition-all shadow-sm ".concat(h?"bg-indigo-400 cursor-wait":"bg-indigo-600 hover:bg-indigo-700 hover:shadow-md active:scale-95"),children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{size:16,className:"animate-spin mr-2"}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.A,{size:16,className:"mr-2"}),"Confirm & Upload"]})}),n&&(0,a.jsx)("input",{type:"hidden",name:"image_url",value:n})]})};g.propTypes={onUploadSuccess:n().func.isRequired};let h=g},8817:(e,s,t)=>{"use strict";t.d(s,{default:()=>eo});var a=t(5155),r=t(9137),l=t.n(r),n=t(2115),i=t(5799);t(5716);var o=t(7580),d=t(9803),c=t(9074),m=t(9103),x=t(7907),u=t(2713),g=t(9772),h=t(1154),p=t(3783),b=t(4835),f=t(4239),j=t(8782);let v={Download:()=>(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),MapPin:()=>(0,a.jsxs)("svg",{className:"w-3 h-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})},y=e=>{let{progress:s}=e;return(0,a.jsx)("div",{className:"fixed top-0 left-0 w-full h-1 z-[9999] transition-opacity duration-500 ".concat(0===s?"opacity-0":"opacity-100"),children:(0,a.jsx)("div",{className:"h-full bg-emerald-500 transition-all duration-300 ease-out",style:{width:"".concat(s,"%")}})})},N=e=>{let{isLive:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold border ".concat(s?"bg-emerald-50 text-emerald-600 border-emerald-200":"bg-gray-50 text-gray-400 border-gray-200"),children:[(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[s&&(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 ".concat(s?"bg-emerald-500":"bg-gray-400")})]}),s?"LIVE":"CONNECTING..."]})},w=()=>{let[e,s]=(0,n.useState)([]),[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)(0),[c,m]=(0,n.useState)(""),[x,u]=(0,n.useState)(!1),[g,h]=(0,n.useState)(""),[p,b]=(0,n.useState)(""),[w,k]=(0,n.useState)(""),[S,A]=(0,n.useState)(""),[C,_]=(0,n.useState)(""),[E,L]=(0,n.useState)(""),[P,R]=(0,n.useState)(""),[O,z]=(0,n.useState)({name:"",branch:"",enroll:"",year:""}),[I,T]=(0,n.useState)(1);(0,n.useEffect)(()=>{let e=setTimeout(()=>{z({name:S,branch:C,enroll:E,year:P})},300);return()=>clearTimeout(e)},[S,C,E,P]);let D=(0,n.useCallback)(e=>{if(!e)return;let[t]=(0,j.dm)([e]);s(e=>{let s=e.findIndex(e=>e._id===t._id);if(!(s>-1))return[t,...e];{let a=[...e];return a[s]=t,a}})},[]);(0,n.useEffect)(()=>{let e;return l&&(d(10),e=setInterval(()=>d(e=>e<90?e+5*Math.random():e),200)),(async()=>{try{let[e,t]=await Promise.all([fetch("".concat(f.AS,"/api/events")),new Promise(e=>(0,f.Yq)({event_id:g||void 0},e))]),a=await e.json();(null==a?void 0:a.events)&&r(a.events);let l=Array.isArray(null==t?void 0:t.data)?t.data:[];new f.s_({connectionCallback:()=>u(!0),punchInCallback:e=>D(e),punchOutCallback:e=>D(e),newMessageCallback:()=>{},successCallback:()=>{},errorCallback:e=>console.error(e),attendanceStartedCallback:()=>{}}),f.s_.instance&&u(!0),setTimeout(()=>{let e=(0,j.dm)(l);e.sort((e,s)=>(s._parsedInDate||0)-(e._parsedInDate||0)),s(e),d(100),setTimeout(()=>{i(!1),d(0)},500)},10)}catch(e){console.error(e),m("Failed to load data"),i(!1)}})(),()=>clearInterval(e)},[g]);let M=(0,n.useMemo)(()=>Array.from(new Set(e.map(e=>e.status).filter(Boolean))),[e]),F=(0,n.useMemo)(()=>{let{name:s,branch:t,enroll:a,year:r}=O;return e.filter(e=>{var l;return(!g||e._eventId===g)&&(!p||(null==(l=e.status)?void 0:l.toLowerCase())===p.toLowerCase())&&(!w||e._distBucket===w)&&(!s||!!e._searchName.includes(s.toLowerCase()))&&(!t||!!e._searchBranch.includes(t.trim().toLowerCase()))&&(!a||!!e._searchEnroll.includes(a.trim().toLowerCase()))&&(!r||!!e._searchYear.includes(r.trim().toLowerCase()))&&!0})},[e,g,p,w,O]),B=50*I,U=B-50,q=F.slice(U,B),V=Math.ceil(F.length/50);return c?(0,a.jsxs)("div",{className:"text-center p-10 text-red-500",children:["Error: ",c," ",(0,a.jsx)("button",{onClick:()=>window.location.reload(),children:"Retry"})]}):(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 p-6 md:p-8 font-sans text-gray-800",children:[(0,a.jsx)(y,{progress:o}),(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between mb-8 gap-4 items-start md:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendance Overview"}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Manage and track student check-ins and locations."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(N,{isLive:x}),(0,a.jsxs)("button",{onClick:()=>{if(!F.length)return alert("No data");alert("Exporting...")},className:"flex items-center gap-2 bg-emerald-600 text-white px-5 py-2.5 rounded-xl hover:bg-emerald-700 transition-colors shadow-sm",children:[(0,a.jsx)(v.Download,{})," Export CSV"]})]})]}),(0,a.jsx)("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-gray-100 mb-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 xl:grid-cols-7 gap-4",children:[(0,a.jsx)("div",{className:"xl:col-span-2",children:(0,a.jsxs)("select",{value:g,onChange:e=>h(e.target.value),className:"w-full bg-gray-50 border p-2.5 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"All Events"}),t.map(e=>(0,a.jsx)("option",{value:(0,j.gR)(e),children:e.title},(0,j.gR)(e)))]})}),(0,a.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),M.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]}),(0,a.jsxs)("select",{value:w,onChange:e=>k(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg",children:[(0,a.jsx)("option",{value:"",children:"Distance (All)"}),(0,a.jsx)("option",{value:"in",children:"✅ Verified (≤500m)"}),(0,a.jsx)("option",{value:"out",children:"⚠️ Out of Range"}),(0,a.jsx)("option",{value:"single",children:"\uD83D\uDCCD Single Punch"}),(0,a.jsx)("option",{value:"no-locations",children:"❌ No Location"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Name",value:S,onChange:e=>A(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg"}),(0,a.jsx)("input",{type:"text",placeholder:"Branch",value:C,onChange:e=>_(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg"}),(0,a.jsx)("input",{type:"text",placeholder:"Enrollment",value:E,onChange:e=>L(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg"}),(0,a.jsx)("input",{type:"text",placeholder:"Year",value:P,onChange:e=>R(e.target.value),className:"bg-gray-50 border p-2.5 rounded-lg"})]})}),(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden min-h-[300px]",children:l?(0,a.jsx)("div",{className:"p-6 space-y-4 animate-pulse",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,a.jsx)("div",{className:"h-12 bg-gray-100 rounded w-full"},s))}):0===F.length?(0,a.jsx)("div",{className:"text-center py-16 text-gray-400",children:"No matching records found."}):(0,a.jsxs)("div",{className:"overflow-x-auto",children:[(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-500",children:[(0,a.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50 border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-4",children:"User Details"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Event"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Time"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Location"}),(0,a.jsx)("th",{className:"px-6 py-4",children:"Status"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-gray-50",children:q.map((e,s)=>(0,a.jsxs)("tr",{className:"bg-white hover:bg-gray-50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-bold text-gray-900",children:e._searchName}),(0,a.jsxs)("div",{className:"text-xs text-gray-400",children:[e._searchEnroll," • ",e._searchBranch]})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs",children:(e=>{var s;return(null==(s=t.find(s=>(0,j.gR)(s)===e))?void 0:s.title)||"N/A"})(e._eventId)})}),(0,a.jsx)("td",{className:"px-6 py-4 text-xs",children:(0,a.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,a.jsxs)("span",{className:"whitespace-nowrap",children:["IN: ",e._parsedInDate?e._parsedInDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):"-"]}),e._parsedOutDate&&(0,a.jsxs)("span",{className:"whitespace-nowrap text-gray-400",children:["OUT: ",e._parsedOutDate.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4",children:["in"===e._distBucket&&(0,a.jsxs)("span",{className:"text-green-600 bg-green-50 px-2 py-1 rounded-full text-xs font-medium border border-green-100 flex items-center w-fit gap-1",children:[(0,a.jsx)(v.MapPin,{})," ≤500m"]}),"out"===e._distBucket&&(0,a.jsxs)("span",{className:"text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs font-medium border border-red-100 flex items-center w-fit gap-1",children:[(0,a.jsx)(v.MapPin,{})," >500m"]}),"single"===e._distBucket&&(0,a.jsx)("span",{className:"text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full text-xs font-medium border border-yellow-100 flex items-center w-fit gap-1",children:"Pending"}),"no-locations"===e._distBucket&&(0,a.jsx)("span",{className:"text-gray-400 text-xs italic",children:"No GPS Data"})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold border ".concat("Present"===e.status?"bg-emerald-50 text-emerald-600 border-emerald-200":"bg-rose-50 text-rose-600 border-rose-200"),children:e.status})})]},e._id||s))})]}),(0,a.jsxs)("div",{className:"flex justify-between p-4 bg-gray-50 border-t",children:[(0,a.jsxs)("span",{children:["Showing ",U+1,"-",Math.min(B,F.length)," of ",F.length]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>T(e=>Math.max(1,e-1)),disabled:1===I,className:"px-3 py-1 bg-white border rounded disabled:opacity-50",children:"Prev"}),(0,a.jsx)("button",{onClick:()=>T(e=>Math.min(V,e+1)),disabled:I===V,className:"px-3 py-1 bg-white border rounded disabled:opacity-50",children:"Next"})]})]})]})})]})};var k=t(4928),S=t(2838),A=t(5526),C=t(4416),_=t(7924),E=t(6474),L=t(646),P=t(3500),R=t(7325),O=t(4186),z=t(4516);let I=[{name:"Nagar Auditorium",lat:"22.381599362662463",long:"73.14314073548469"},{name:"SOT Auditorium",lat:"22.385636040754616",long:"73.14493074913331"},{name:"Anviksha Building",lat:"22.3862105355751",long:"73.14561660211221"},{name:"SOS Building",lat:"22.382901016778522",long:"73.14696416837283"},{name:"Aangava",lat:"22.385277259337578",long:"73.14446294649058"},{name:"Basket Ball Court ( Aangava )",lat:"22.385232418863385",long:"73.14407034812744"}],T=e=>{let{icon:s,className:t="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[s&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(s,{size:18})}),(0,a.jsx)("input",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(s?"pl-10":""," transition-all duration-200 ").concat(t)})]})},D=e=>{let{icon:s,className:t="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[s&&(0,a.jsx)("div",{className:"absolute top-3 left-0 pl-3 pointer-events-none text-gray-400",children:(0,a.jsx)(s,{size:18})}),(0,a.jsx)("textarea",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(s?"pl-10":""," transition-all duration-200 ").concat(t)})]})};function M(e){let{items:s,display:t,value:r,onChange:l,placeholder:i="Search...",multiple:o=!1}=e,[d,c]=(0,n.useState)(""),[m,x]=(0,n.useState)(!1),u=(0,n.useRef)(null),g=e=>t(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim(),h=(0,n.useMemo)(()=>{let e=d.toLowerCase().trim();return s.filter(s=>!(o&&Array.isArray(r)&&r.includes(s._id))&&(!e||(g(s)||"").toLowerCase().includes(e)))},[s,d,t,r,o]),p=(0,n.useMemo)(()=>{if(o)return"";let e=s.find(e=>r&&(null==e?void 0:e._id)===r);return e?g(e):""},[s,r,t,o]);return(0,a.jsxs)("div",{className:"relative group",children:[o&&Array.isArray(r)&&r.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mb-3 p-2 bg-indigo-50 border border-indigo-100 rounded-lg",children:r.map(e=>{let t=s.find(s=>s._id===e);return t?(0,a.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-white border border-indigo-200 text-indigo-700 text-xs font-medium shadow-sm transition-all hover:shadow-md",children:[g(t),(0,a.jsx)("button",{type:"button",onClick:s=>{s.preventDefault(),s.stopPropagation(),o&&Array.isArray(r)&&(null==l||l(r.filter(s=>s!==e)))},className:"ml-2 p-0.5 rounded-full hover:bg-indigo-100 text-indigo-400 hover:text-indigo-600 focus:outline-none transition-colors",children:(0,a.jsx)(C.A,{size:12})})]},e):null})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(_.A,{size:18})}),(0,a.jsx)("input",{ref:u,type:"text",placeholder:p||i,value:o||m?d:p,onChange:e=>c(e.target.value),onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),200),className:"w-full pl-10 pr-10 py-2.5 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block transition-all shadow-sm"}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(E.A,{size:16})})]}),m&&(0,a.jsxs)("div",{className:"absolute z-50 mt-1 w-full bg-white border border-gray-200 rounded-lg shadow-xl max-h-60 overflow-y-auto animate-in fade-in zoom-in-95 duration-100",children:[0===h.length&&(0,a.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500 text-center italic",children:"No matching speakers found"}),h.map(e=>(0,a.jsxs)("button",{type:"button",className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-700 transition-colors flex items-center gap-2 border-b border-gray-50 last:border-0",onClick:()=>(e=>{if(o){var s;let t=Array.isArray(r)?r:[];t.includes(e)||null==l||l([...t,e]),c(""),null==(s=u.current)||s.focus()}else null==l||l(e),x(!1),c("")})(e._id),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-indigo-400"}),g(e)]},e._id))]})]})}function F(){let[e,s]=(0,n.useState)(!1),[t,r]=(0,n.useState)(""),[l,d]=(0,n.useState)([]),[c,m]=(0,n.useState)([]),[x,u]=(0,n.useState)(""),[g,h]=(0,n.useState)(""),[p,b]=(0,n.useState)("");(0,n.useEffect)(()=>{(async()=>{d(await (0,f.Pq)()||[])})()},[]);let j=async e=>{if(e.preventDefault(),0===c.length)return void i.oR.error("Please select at least one speaker");s(!0);try{await (0,f.lh)(e,()=>i.oR.success("Event created successfully!"),e=>i.oR.error((null==e?void 0:e.message)||"Failed to create event")),e.target.reset(),r(""),m([]),u(""),h(""),b("")}finally{s(!1)}};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 py-10 px-4 sm:px-6 lg:px-8",children:[(0,a.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,a.jsxs)("div",{className:"mb-8 text-center sm:text-left",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Create New Event"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Fill in the details below to schedule a new session."})]}),(0,a.jsx)("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-2xl overflow-hidden border border-gray-100",children:(0,a.jsxs)("div",{className:"p-6 sm:p-10 space-y-8",children:[(0,a.jsxs)("form",{id:"create-event-form",onSubmit:j,className:"hidden",children:[(0,a.jsx)("input",{type:"hidden",name:"speaker_ids",value:c.join(",")||""}),(0,a.jsx)("input",{type:"hidden",name:"banner_url",value:t||""})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-1 space-y-4",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700",children:"Event Banner"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:bg-gray-100 transition-colors text-center min-h-[200px] flex flex-col items-center justify-center",children:[(0,a.jsx)(A.default,{onUploadSuccess:r}),t?(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-md",children:[(0,a.jsx)(L.A,{size:12,className:"mr-1"})," Image Ready"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400 mt-2",children:"Recommended: 16:9 Aspect Ratio"})]}),(0,a.jsxs)("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-100",children:[(0,a.jsx)("div",{className:"flex items-center h-5",children:(0,a.jsx)("input",{form:"create-event-form",id:"mandatory",name:"mandatory",type:"checkbox",defaultChecked:!0,className:"w-4 h-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"})}),(0,a.jsxs)("div",{className:"ml-3 text-sm",children:[(0,a.jsx)("label",{htmlFor:"mandatory",className:"font-medium text-blue-900",children:"Mandatory Attendance"}),(0,a.jsx)("p",{className:"text-blue-700/70 text-xs",children:"Students must attend this event"})]})]})]}),(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"title",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Event Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(T,{form:"create-event-form",id:"title",name:"title",required:!0,placeholder:"e.g. Introduction to Next.js",icon:P.A,className:"text-lg font-medium"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"detail",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),(0,a.jsx)(D,{form:"create-event-form",id:"detail",name:"detail",rows:3,placeholder:"Brief overview of the event...",icon:R.A})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"objectives",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Objectives ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(D,{form:"create-event-form",id:"objectives",name:"objectives",required:!0,rows:3,placeholder:"• Objective 1 • Objective 2"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"learning_outcomes",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Learning Outcomes ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(D,{form:"create-event-form",id:"learning_outcomes",name:"learning_outcomes",required:!0,rows:3,placeholder:"• Outcome 1 • Outcome 2"})]})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(O.A,{className:"mr-2 text-indigo-500",size:20})," Schedule"]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"start_time",className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Starts"}),(0,a.jsx)("input",{form:"create-event-form",type:"datetime-local",id:"start_time",name:"start_time",required:!0,className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"end_time",className:"block text-xs font-medium text-gray-500 uppercase tracking-wide mb-1",children:"Ends"}),(0,a.jsx)("input",{form:"create-event-form",type:"datetime-local",id:"end_time",name:"end_time",required:!0,className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:[(0,a.jsx)(z.A,{className:"mr-2 text-indigo-500",size:20})," Venue Details"]}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{form:"create-event-form",id:"address",name:"address",required:!0,value:x,onChange:e=>{let s=e.target.value;u(s);let t=I.find(e=>e.name===s);t?(h(t.lat),b(t.long)):(h(""),b(""))},className:"w-full bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 mb-3",children:[(0,a.jsx)("option",{value:"",children:"-- Select Venue --"}),I.map(e=>(0,a.jsx)("option",{value:e.name,children:e.name},e.name))]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{form:"create-event-form",type:"number",id:"lat",name:"lat",step:"any",value:g,onChange:e=>h(e.target.value),placeholder:"Latitude",className:"w-full bg-gray-100 text-gray-500 border-0 rounded-lg p-2 text-xs font-mono",readOnly:!!g})}),(0,a.jsx)("div",{className:"relative",children:(0,a.jsx)("input",{form:"create-event-form",type:"number",id:"long",name:"long",step:"any",value:p,onChange:e=>b(e.target.value),placeholder:"Longitude",className:"w-full bg-gray-100 text-gray-500 border-0 rounded-lg p-2 text-xs font-mono",readOnly:!!p})})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100"}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center mb-4",children:[(0,a.jsx)(o.A,{className:"mr-2 text-indigo-500",size:20})," Speakers"]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Guest Speakers"}),(0,a.jsx)(M,{items:l,value:c,onChange:m,multiple:!0,placeholder:"Search speaker name...",display:e=>(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",form:"create-event-form",disabled:e,className:"w-full flex justify-center py-4 px-4 border border-transparent rounded-xl shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.99]",children:e?"Processing Event...":"Create Event"})})]})})]}),(0,a.jsx)(i.ToastContainer,{position:"bottom-right",theme:"colored"})]})}var B=t(5028),U=t(1007),q=t(8136),V=t(1264),G=t(2486),Q=t(232),W=t(2919),Y=t(8749),Z=t(2657),J=t(1284),$=t(8164);let H=(0,B.default)(()=>Promise.resolve().then(t.bind(t,5526)),{loadableGenerated:{webpack:()=>[5526]},ssr:!1}),K=e=>{let{icon:s,className:t="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[s&&(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(s,{size:18})}),(0,a.jsx)("input",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(s?"pl-10":""," transition-all duration-200 ").concat(t)})]})},X=e=>{let{icon:s,className:t="",...r}=e;return(0,a.jsxs)("div",{className:"relative",children:[s&&(0,a.jsx)("div",{className:"absolute top-3 left-0 pl-3 pointer-events-none text-gray-400",children:(0,a.jsx)(s,{size:18})}),(0,a.jsx)("textarea",{...r,className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 ".concat(s?"pl-10":""," transition-all duration-200 ").concat(t)})]})};function ee(){let[e,s]=(0,n.useState)(""),[t,r]=(0,n.useState)(!1),[l,o]=(0,n.useState)(!1),[d,c]=(0,n.useState)(0),[m,x]=(0,n.useState)(!1),u={style:{background:"#10B981",color:"white"}},g={style:{background:"#EF4444",color:"white"}},h={style:{background:"#F59E0B",color:"white"}};(0,n.useEffect)(()=>{if(d>0){let e=setTimeout(()=>c(e=>e-1),1e3);return()=>clearTimeout(e)}},[d]);let p=async e=>{if(!e.trim())return void i.oR.warning("Enter email first!",h);x(!0);try{let s=await (0,f.A$)(e,"verification");(null==s?void 0:s.success)?(i.oR.success("OTP sent!",u),c(15)):i.oR.error((null==s?void 0:s.message)||"Failed to send OTP!",g)}catch(e){i.oR.error("Error sending OTP!",g)}finally{x(!1)}},b=async t=>{t.preventDefault(),o(!0);let a=new FormData(t.target);return(console.log(Object.entries(a.entries())),e)?(a.get("password")||"").length<8?(i.oR.warning("Password must be at least 8 characters!",h),o(!1)):a.get("otp")?void(await (0,f.DY)({preventDefault:()=>{},target:t.target,submitter:t.nativeEvent.submitter},e=>{i.oR.success((null==e?void 0:e.message)||"Speaker registered!",u),t.target.reset(),s(""),c(0)},e=>i.oR.error((null==e?void 0:e.message)||"Failed to register speaker!",g)),o(!1)):(i.oR.warning("OTP required!",h),o(!1)):(i.oR.warning("Upload a speaker image!",h),o(!1))};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50/50 py-10 px-4 sm:px-6 lg:px-8 flex items-center justify-center",children:[(0,a.jsxs)("div",{className:"max-w-4xl w-full",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 tracking-tight",children:"Register New Speaker"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Create a profile for a guest speaker or lecturer."})]}),(0,a.jsxs)("div",{className:"bg-white shadow-xl shadow-gray-200/50 rounded-2xl overflow-hidden border border-gray-100 p-6 sm:p-10",children:[(0,a.jsx)("div",{className:"flex flex-col items-center mb-8",children:(0,a.jsxs)("div",{className:"w-full max-w-sm",children:[(0,a.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2 text-center",children:"Speaker Photo"}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-4 bg-gray-50 hover:bg-gray-100 transition-colors flex flex-col items-center justify-center min-h-[160px]",children:[(0,a.jsx)(H,{onUploadSuccess:s}),e?(0,a.jsxs)("div",{className:"mt-3 flex items-center text-xs text-green-600 font-medium bg-green-50 px-2 py-1 rounded-md",children:[(0,a.jsx)(L.A,{size:12,className:"mr-1"})," Image Uploaded"]}):(0,a.jsx)("span",{className:"text-xs text-gray-400 mt-2",children:"Upload profile picture"})]})]})}),(0,a.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,a.jsx)("input",{name:"role",type:"text",value:"Speaker",hidden:!0,readOnly:!0}),(0,a.jsx)("input",{name:"imageUrl",type:"text",value:e,hidden:!0,readOnly:!0}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-100 pb-2",children:"Personal Details"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),(0,a.jsx)(K,{name:"name",placeholder:"e.g. Dr. John Doe",icon:U.A,required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nickname"}),(0,a.jsx)(K,{name:"nickname",placeholder:"Alias"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{name:"gender",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 appearance-none",children:[(0,a.jsx)("option",{value:"Male",children:"Male"}),(0,a.jsx)("option",{value:"Female",children:"Female"})]}),(0,a.jsx)("div",{className:"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-gray-500",children:(0,a.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Organization"}),(0,a.jsx)(K,{name:"organization",placeholder:"University or Company Name",icon:q.A})]})]}),(0,a.jsxs)("div",{className:"space-y-5",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 border-b border-gray-100 pb-2",children:"Account Security"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email Verification"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("div",{className:"relative flex-grow",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(V.A,{size:18})}),(0,a.jsx)("input",{name:"email",type:"email",placeholder:"email@example.com",className:"w-full pl-10 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5"})]}),(0,a.jsx)("button",{type:"button",disabled:d>0||m,onClick:()=>p(document.querySelector("input[name='email']").value),className:"px-4 py-2 rounded-lg text-sm font-medium text-white shadow-sm transition-all flex items-center whitespace-nowrap ".concat(d>0?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700 active:scale-95"),children:m?(0,a.jsx)("span",{className:"animate-pulse",children:"Sending..."}):d>0?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsx)("span",{className:"w-4 text-center",children:d}),"s"]}):(0,a.jsxs)(a.Fragment,{children:["Send OTP ",(0,a.jsx)(G.A,{size:14,className:"ml-1"})]})})]}),(0,a.jsx)(K,{name:"otp",placeholder:"Enter 6-digit OTP",icon:Q.A})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-gray-400",children:(0,a.jsx)(W.A,{size:18})}),(0,a.jsx)("input",{type:t?"text":"password",name:"password",placeholder:"Min 8 characters",className:"w-full bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block p-2.5 pl-10 pr-10"}),(0,a.jsx)("button",{type:"button",onClick:()=>r(e=>!e),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 cursor-pointer",children:t?(0,a.jsx)(Y.A,{size:18}):(0,a.jsx)(Z.A,{size:18})})]})]})]})]}),(0,a.jsx)("hr",{className:"border-gray-100 my-2"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"About Speaker"}),(0,a.jsx)(X,{name:"about",placeholder:"Brief bio or description...",icon:J.A,rows:4})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Social Links"}),(0,a.jsx)(X,{name:"links",placeholder:"https://linkedin.com/in/xyz, https://website.com",icon:$.A,rows:4}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 text-right",children:"Separate multiple links with commas"})]})]}),(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3.5 px-4 border border-transparent rounded-xl shadow-sm text-lg font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all transform active:scale-[0.99]",children:l?(0,a.jsxs)("span",{className:"flex items-center",children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,a.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,a.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Registering..."]}):"Register Speaker"})})]})]})]}),(0,a.jsx)(i.ToastContainer,{autoClose:2e3,hideProgressBar:!0,theme:"colored",position:"bottom-right"})]})}var es=t(2502),et=t(4065),ea=t(2834);es.t1.register(es.PP,es.kc,es.E8,es.hE,es.m_,es.s$,es.Bs,ea.A);let er=n.memo(e=>{let{title:s,value:t,subtext:r,color:l="blue"}=e;return(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border-l-4 border-".concat(l,"-500 transition-all duration-300"),children:[(0,a.jsx)("p",{className:"text-gray-500 text-xs uppercase font-bold",children:s}),(0,a.jsxs)("div",{className:"flex items-end justify-between mt-1",children:[(0,a.jsx)("h3",{className:"text-2xl font-bold text-gray-800",children:t}),r&&(0,a.jsx)("span",{className:"text-xs text-gray-400 mb-1",children:r})]})]})}),el=e=>{let{isLive:s}=e;return(0,a.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold border ".concat(s?"bg-emerald-50 text-emerald-600 border-emerald-200":"bg-gray-50 text-gray-400 border-gray-200"),children:[(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[s&&(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 ".concat(s?"bg-emerald-500":"bg-gray-400")})]}),s?"LIVE":"OFFLINE"]})},en=()=>{let[e,s]=(0,n.useState)([]),[t,r]=(0,n.useState)([]),[l,i]=(0,n.useState)(!0),[o,d]=(0,n.useState)(!1),[c,m]=(0,n.useState)({event:"",school:"",degree:"",stream:"",year:""}),x=(0,n.useCallback)(e=>{if(!e)return;let[t]=(0,j.dm)([e]);s(e=>{let s=e.findIndex(e=>e._id===t._id);if(!(s>-1))return[t,...e];{let a=[...e];return a[s]=t,a}})},[]);(0,n.useEffect)(()=>{(async()=>{try{let[e,t]=await Promise.all([fetch("".concat(f.AS,"/api/events")),new Promise(e=>(0,f.Yq)({},e))]),a=await e.json();r(a.events||[]);let l=Array.isArray(null==t?void 0:t.data)?t.data:[];new f.s_({connectionCallback:()=>{d(!0),console.log("Socket Connected")},punchInCallback:e=>{console.log("⚡ Punch In (No Load)"),x(e)},punchOutCallback:e=>{console.log("⚡ Punch Out (No Load)"),x(e)},newMessageCallback:()=>{},successCallback:()=>{},errorCallback:e=>console.error(e),attendanceStartedCallback:()=>{}}),f.s_.instance&&d(!0),setTimeout(()=>{let e=(0,j.dm)(l);s(e),i(!1)},50)}catch(e){console.error("Init Error:",e),i(!1)}})()},[x]);let u=(0,n.useMemo)(()=>{let e=Object.keys(j.QZ["school-branch"]),s=c.school?j.QZ["school-branch"][c.school]:e.flatMap(e=>j.QZ["school-branch"][e]),a=c.degree&&j.QZ["branch-stream"][c.degree]?j.QZ["branch-stream"][c.degree]:[];return{events:t,schools:e.map(e=>({_id:e,title:e})),degrees:[...new Set(s)].map(e=>({_id:e,title:e})),streams:[...new Set(a)].map(e=>({_id:e,title:e}))}},[c.school,c.degree,t]),g=(0,n.useMemo)(()=>e.filter(e=>(!c.event||e._eventId===c.event)&&(!c.school||e._school===c.school)&&(!c.degree||e._degree===c.degree)&&(!c.stream||e._stream===c.stream)&&(!c.year||e._year.includes(c.year))),[e,c]),h=(0,n.useMemo)(()=>{let e=g.reduce((e,s)=>(e.total++,"Present"===s.status&&e.present++,e.status[s.status||"Unknown"]=(e.status[s.status||"Unknown"]||0)+1,e.school[s._school]=(e.school[s._school]||0)+1,e.degree[s._degree]=(e.degree[s._degree]||0)+1,e.stream[s._stream]=(e.stream[s._stream]||0)+1,null===s._dist?e.distance.unknown++:s._distValid?e.distance.valid++:e.distance.invalid++,e),{status:{},school:{},degree:{},stream:{},distance:{valid:0,invalid:0,unknown:0},total:0,present:0}),s=(e,s)=>{let t=Object.keys(e).sort((s,t)=>e[t]-e[s]);return{labels:t,datasets:[{data:t.map(s=>e[s]),backgroundColor:s,borderRadius:4,barPercentage:.6}]}};return{metrics:{total:e.total,present:e.present,percentage:e.total>0?(e.present/e.total*100).toFixed(1):"0.0"},charts:{status:s(e.status,[j.lm.status.present,j.lm.status.absent,j.lm.status.late,j.lm.status.exc]),school:s(e.school,j.lm.primary),degree:s(e.degree,j.lm.primary[1]),stream:s(e.stream,"#0EA5E9"),distance:{labels:["In Range (≤500m)","Out of Range (>500m)","Unknown"],datasets:[{data:[e.distance.valid,e.distance.invalid,e.distance.unknown],backgroundColor:j.lm.geo,borderWidth:0}]}}}},[g]),p=(e,s)=>({responsive:!0,maintainAspectRatio:!1,indexAxis:"horizontal"===s?"y":"x",plugins:{legend:{display:"pie"===s||"doughnut"===s,position:"right"},title:{display:!!e,text:e},datalabels:{color:"pie"===s?"#fff":"#374151",font:{weight:"bold"},formatter:e=>e>0?e:""}},scales:"pie"===s||"doughnut"===s?{x:{display:!1},y:{display:!1}}:{x:{grid:{display:!1}},y:{grid:{color:"#f3f4f6"},beginAtZero:!0}}});return(0,a.jsx)("div",{className:"p-6 bg-slate-50 min-h-screen font-sans",children:l?(0,a.jsx)("div",{className:"flex items-center justify-center h-screen",children:(0,a.jsx)("div",{className:"w-12 h-12 bg-blue-200 rounded-full animate-pulse"})}):(0,a.jsxs)("div",{className:"animate-in fade-in duration-500",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-8 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-slate-800",children:"Academic Analytics"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:"Real-time attendance insights"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(el,{isLive:o}),(0,a.jsxs)("div",{className:"text-right hidden md:block",children:[(0,a.jsx)("p",{className:"text-xs font-bold text-slate-400 uppercase",children:"Last Updated"}),(0,a.jsx)("p",{className:"text-sm font-medium text-slate-600",children:new Date().toLocaleTimeString()})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[(0,a.jsx)(er,{title:"Total Records",value:h.metrics.total,color:"blue"}),(0,a.jsx)(er,{title:"Presence",value:"".concat(h.metrics.percentage,"%"),color:"emerald"}),(0,a.jsx)(er,{title:"Location Valid",value:h.charts.distance.datasets[0].data[0],color:"purple"}),(0,a.jsx)(er,{title:"Departments",value:h.charts.degree.labels.length,color:"amber"})]}),(0,a.jsxs)("div",{className:"bg-white p-4 rounded-xl shadow-sm border mb-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:[(0,a.jsxs)("select",{className:"border p-2 rounded",value:c.event,onChange:e=>m(s=>({...s,event:e.target.value})),children:[(0,a.jsx)("option",{value:"",children:"All Events"}),u.events.map(e=>(0,a.jsx)("option",{value:(0,j.gR)(e),children:e.title},(0,j.gR)(e)))]}),(0,a.jsxs)("select",{className:"border p-2 rounded",value:c.school,onChange:e=>m(s=>({...s,school:e.target.value,degree:"",stream:""})),children:[(0,a.jsx)("option",{value:"",children:"All Schools"}),u.schools.map(e=>(0,a.jsx)("option",{value:e._id,children:e.title},e._id))]}),(0,a.jsxs)("select",{className:"border p-2 rounded",disabled:!c.school,value:c.degree,onChange:e=>m(s=>({...s,degree:e.target.value,stream:""})),children:[(0,a.jsx)("option",{value:"",children:"All Degrees"}),u.degrees.map(e=>(0,a.jsx)("option",{value:e._id,children:e.title},e._id))]}),(0,a.jsx)("input",{className:"border p-2 rounded",placeholder:"Year",value:c.year,onChange:e=>m(s=>({...s,year:e.target.value}))})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-5 rounded-xl shadow h-80",children:(0,a.jsx)(et.Fq,{data:h.charts.status,options:p("Attendance Status","pie")})}),(0,a.jsx)("div",{className:"bg-white p-5 rounded-xl shadow h-80",children:(0,a.jsx)(et.yP,{data:h.charts.school,options:p("School Distribution","bar")})}),(0,a.jsx)("div",{className:"bg-white p-5 rounded-xl shadow h-80",children:(0,a.jsx)(et.nu,{data:h.charts.distance,options:p("Location Validity","doughnut")})}),(0,a.jsx)("div",{className:"bg-white p-5 rounded-xl shadow h-80 md:col-span-2",children:(0,a.jsx)(et.yP,{data:h.charts.stream,options:p("Stream Breakdown","horizontal")})})]})]})})};var ei=t(6427);let eo=()=>{let[e,s]=(0,n.useState)("attendance"),[t,r]=(0,n.useState)(!1),[j,v]=(0,n.useState)("Teacher Dashboard"),y=[{id:"attendance",label:"Attendance",icon:o.A},{id:"classroom",label:"Classroom Live",icon:d.A},{id:"events",label:"All Events",icon:c.A},{id:"create-event",label:"Create Event",icon:m.A},{id:"create-speaker",label:"Register Speaker",icon:x.A},{id:"charts",label:"Analytics",icon:u.A},{id:"profile",label:"Profile",icon:g.A}];return(0,n.useEffect)(()=>{(async()=>{let e=await (0,f.VU)();e&&v(e.name||e.firstName||"Teacher")})()},[]),(0,n.useEffect)(()=>{let e=sessionStorage.getItem("teacherActiveTab");e&&(s(e),"classroom"===e&&(r(!0),setTimeout(()=>{r(!1)},2e3)))},[]),(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 min-h-screen bg-slate-50 font-sans text-slate-800",children:[(0,a.jsx)("header",{className:"jsx-27c8e4e60601fa70 bg-white border-b border-slate-200 sticky top-0 z-20 shadow-sm",children:(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 flex justify-between items-center h-16",children:[(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 flex items-center gap-2",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 bg-indigo-600 p-2 rounded-lg",children:(0,a.jsx)(p.A,{className:"h-6 w-6 text-white"})}),(0,a.jsx)("h1",{className:"jsx-27c8e4e60601fa70 text-xl md:text-2xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent hidden sm:block",children:j}),(0,a.jsx)("h1",{className:"jsx-27c8e4e60601fa70 text-lg font-bold text-indigo-700 sm:hidden",children:"Dashboard"})]}),(0,a.jsxs)("button",{onClick:f.eg.handler(()=>{sessionStorage.clear(),window.location.href="/LoginSignUp"},e=>console.error(e)),className:"jsx-27c8e4e60601fa70 group flex items-center gap-2 px-4 py-2 text-sm font-medium text-slate-600 hover:text-red-600 hover:bg-red-50 rounded-full transition-all duration-300",children:[(0,a.jsx)("span",{className:"jsx-27c8e4e60601fa70 hidden sm:block",children:"Logout"}),(0,a.jsx)(b.A,{className:"h-5 w-5 group-hover:rotate-180 transition-transform duration-500"})]})]})})}),(0,a.jsxs)("main",{className:"jsx-27c8e4e60601fa70 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 mb-8",children:(0,a.jsx)("nav",{"aria-label":"Tabs",className:"jsx-27c8e4e60601fa70 flex space-x-2 overflow-x-auto pb-4 sm:pb-0 sm:flex-wrap sm:justify-start scrollbar-hide",children:y.map(t=>{let l=t.icon,n=e===t.id;return(0,a.jsxs)("button",{onClick:()=>(t=>{t!==e&&("classroom"===t?(sessionStorage.setItem("teacherActiveTab","classroom"),window.location.reload()):(sessionStorage.setItem("teacherActiveTab",t),s(t),r(!1)))})(t.id),className:"jsx-27c8e4e60601fa70 "+"\n                    flex items-center gap-2 px-5 py-3 text-sm font-medium rounded-xl whitespace-nowrap transition-all duration-200\n                    ".concat(n?"bg-indigo-600 text-white shadow-md shadow-indigo-200 translate-y-[-2px]":"bg-white text-slate-600 hover:bg-indigo-50 hover:text-indigo-600 border border-transparent hover:border-indigo-100","\n                  "),children:[(0,a.jsx)(l,{className:"jsx-27c8e4e60601fa70 "+"h-4 w-4 ".concat(n?"text-indigo-100":"text-slate-400")}),t.label]},t.id)})})}),(0,a.jsxs)("div",{className:"jsx-27c8e4e60601fa70 bg-white rounded-2xl shadow-xl border border-slate-100 min-h-[600px] relative overflow-hidden",children:[(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500"}),(0,a.jsx)("div",{className:"jsx-27c8e4e60601fa70 p-4 sm:p-6 lg:p-8",children:(()=>{if(t)return(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-[50vh] text-indigo-600",children:[(0,a.jsx)(h.A,{className:"h-16 w-16 animate-spin mb-4"}),(0,a.jsx)("h2",{className:"text-xl font-medium text-slate-600 animate-pulse",children:"Connecting to Live Classroom..."})]});switch(e){case"attendance":return(0,a.jsx)(w,{});case"classroom":return(0,a.jsx)(k.A,{});case"events":return(0,a.jsx)(S.default,{});case"create-event":return(0,a.jsx)(F,{});case"create-speaker":return(0,a.jsx)(ee,{});case"charts":return(0,a.jsx)(en,{});case"profile":return(0,a.jsx)(ei.A,{});default:return(0,a.jsx)("div",{className:"text-gray-500 text-center mt-10",children:"Select an option from the tabs."})}})()})]})]}),(0,a.jsx)(i.ToastContainer,{position:"bottom-right",theme:"colored"}),(0,a.jsx)(l(),{id:"27c8e4e60601fa70",children:".scrollbar-hide.jsx-27c8e4e60601fa70::-webkit-scrollbar{display:none}.scrollbar-hide.jsx-27c8e4e60601fa70{-ms-overflow-style:none;scrollbar-width:none}"})]})}}},e=>{e.O(0,[797,647,726,311,766,874,767,470,222,838,288,441,964,358],()=>e(e.s=3104)),_N_E=e.O()}]);