(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{4239:(e,t,r)=>{"use strict";r.d(t,{A$:()=>n.A$,AS:()=>n.AS,DY:()=>n.DY,In:()=>n.In,Pq:()=>n.Pq,VU:()=>n.VU,Yq:()=>n.Yq,bB:()=>n.bB,eg:()=>n.eg,iD:()=>n.iD,kQ:()=>n.kQ,lh:()=>n.lh,lo:()=>n.lo,qM:()=>n.qM,s_:()=>n.s_,tq:()=>n.tq,xF:()=>n.xF,xw:()=>n.xw,zz:()=>n.zz});var n=r(2105);r(8222),r(8782)},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var n=r(2115),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(o),s=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,l({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:o,size:a,title:i}=e,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,s),d=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==a?n.createElement(a.Consumer,null,e=>t(e)):t(o)}},4800:(e,t,r)=>{Promise.resolve().then(r.bind(r,9994))},5716:()=>{},7097:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(5155);r(2115);let o=e=>{let{icon:t,className:r,...o}=e;return(0,n.jsxs)("div",{className:"flex items-center bg-gray-50 border border-gray-200 rounded-xl focus-within:ring-2 focus-within:ring-green-400 focus-within:bg-white shadow-sm transition-all duration-200 ".concat(r),children:[t&&(0,n.jsx)(t,{className:"text-gray-400 mx-3 text-lg shrink-0"}),(0,n.jsx)("input",{...o,className:"bg-transparent outline-none text-sm w-full p-3 text-gray-700 placeholder-gray-400 rounded-xl"})]})}},8782:(e,t,r)=>{"use strict";r.d(t,{Bv:()=>n,QZ:()=>a,dm:()=>i,gR:()=>l,lm:()=>o});let n=e=>new Date(new Date(e)-6e4*new Date().getTimezoneOffset()).toISOString().slice(0,16),o={primary:["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981"],status:{present:"#10B981",absent:"#EF4444",late:"#F59E0B",exc:"#3B82F6"},geo:["#10B981","#EF4444","#9CA3AF"]},a={"school-branch":{"School of Technology":["B.Tech.","BCA"],"School of Science":["B.Sc."],"School of Management Studies and Liberal Arts":["B.Com.","BBA"]},"branch-stream":{"B.Tech.":["Chemical","Chemical D2D","Computer Science & Engg.","Computer Science & Engg. D2D","Fire & EHS","Fire & EHS. D2D"],BCA:["General"],"B.Sc.":["Biotechnology","Chemistry","Data Science","Micro Biology"],"B.Com.":["/ B.Com (Hons.)"],BBA:["Business Analytics","HR / Marketing /Accounting & Finance / IT Mg"]}},s=e=>{try{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}catch(e){return null}},l=e=>(e&&"object"==typeof e?e._id:e)||"",i=e=>Array.isArray(e)?e.map(e=>{var t,r,n,o,i,c,u,d;let g=e.user_id||{},{school:h,degree:m,stream:p}=(e=>{if(!e)return{school:"Other",degree:"Other",stream:"Unknown"};let t=e.trim();for(let[e,r]of Object.entries(a["school-branch"]))for(let n of r)if(t.includes(n)){let r=t.replace(n,"").replace(/^[\.\/\-\s]+/,"").trim();if(a["branch-stream"][n]){let e=a["branch-stream"][n].find(e=>r.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(r.toLowerCase()));e&&(r=e)}return{school:e,degree:n,stream:r||"General"}}return{school:"Other",degree:"Other",stream:t}})(e.branch||g.branch||"Unknown"),f=null==(r=e.locations)||null==(t=r[0])?void 0:t.lat,b=null==(o=e.locations)||null==(n=o[0])?void 0:n.long,y=((e,t,r,n)=>{if(!e||!t||!r||!n)return null;let o=e=>e*Math.PI/180,a=Math.sin(o(r-e)/2)**2+Math.cos(o(e))*Math.cos(o(r))*Math.sin(o(n-t)/2)**2;return 12742e3*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))})(f,b,null==(c=e.locations)||null==(i=c.at(-1))?void 0:i.lat,null==(d=e.locations)||null==(u=d.at(-1))?void 0:u.long),x="no-locations";return x=e.locations&&0!==e.locations.length?1===e.locations.length?"single":null!==y&&y<=500?"in":"out":"no-locations",{...e,_eventId:l(e.event_id),_parsedInDate:s(e.punch_in_time),_parsedOutDate:s(e.punch_out_time),_school:h,_degree:m,_stream:p,_year:(e.year||g.year||"Unknown").toString(),_searchName:(e.name||g.name||"").toLowerCase(),_searchBranch:(e.branch||g.branch||"").toString().trim().toLowerCase(),_searchYear:(e.year||g.year||"").toString().trim().toLowerCase(),_searchEnroll:(e.enrollment_id||g.enrollment_id||"").toString().toLowerCase(),_dist:y,_distBucket:x,_distValid:null!==y&&y<=500}}):[]},9994:(e,t,r)=>{"use strict";r.d(t,{default:()=>u});var n=r(5155),o=r(2115),a=r(5695),s=r(5799);r(5716);var l=r(7097),i=r(9911),c=r(4239);let u=()=>{let e=(0,a.useRouter)(),[t,r]=(0,o.useState)(""),[u,d]=(0,o.useState)(!1),[g,h]=(0,o.useState)(""),[m,p]=(0,o.useState)(""),[f,b]=(0,o.useState)(""),[y,x]=(0,o.useState)(!1),[w,v]=(0,o.useState)(!1),[j,O]=(0,o.useState)(!1),C=async()=>{if(!t)return s.oR.error("Enter your email first!");O(!0),(0,c.A$)(t,"password reset",()=>{s.oR.success("OTP sent to your email!"),d(!0),O(!1)},e=>{s.oR.error(e.message||"Failed to send OTP"),O(!1)})};return(0,n.jsxs)("div",{className:"flex items-center justify-center    h-[calc(100vh-80px)]    bg-gradient-to-br from-green-50 to-gray-100 px-4 overflow-hidden",children:[(0,n.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md border border-gray-200",children:[(0,n.jsx)("h2",{className:"text-3xl font-extrabold text-green-600 mb-2 text-center",children:"Forgot Password"}),(0,n.jsx)("p",{className:"text-gray-500 text-center mb-8 text-sm",children:"Enter your registered email to receive OTP for password reset."}),(0,n.jsx)(l.A,{type:"email",placeholder:"Enter your email",icon:i.maD,value:t,onChange:e=>r(e.target.value)}),u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",placeholder:"Enter OTP",value:g,onChange:e=>h(e.target.value),className:"w-full h-12 mt-4 px-4 rounded-lg border border-gray-300    focus:border-green-500 focus:ring focus:ring-green-200 bg-white outline-none"}),(0,n.jsxs)("div",{className:"relative mt-4",children:[(0,n.jsx)("input",{type:y?"text":"password",placeholder:"New Password",value:m,onChange:e=>p(e.target.value),className:"w-full h-12 px-4 rounded-lg border border-gray-300    focus:border-green-500 focus:ring focus:ring-green-200 bg-white outline-none"}),(0,n.jsx)("span",{className:"absolute right-4 top-3.5 cursor-pointer text-gray-500",onClick:()=>x(!y),children:y?(0,n.jsx)(i.mx3,{}):(0,n.jsx)(i.Ny1,{})})]}),(0,n.jsxs)("div",{className:"relative mt-4",children:[(0,n.jsx)("input",{type:w?"text":"password",placeholder:"Confirm Password",value:f,onChange:e=>b(e.target.value),className:"w-full h-12 px-4 rounded-lg border border-gray-300    focus:border-green-500 focus:ring focus:ring-green-200 bg-white outline-none"}),(0,n.jsx)("span",{className:"absolute right-4 top-3.5 cursor-pointer text-gray-500",onClick:()=>v(!w),children:w?(0,n.jsx)(i.mx3,{}):(0,n.jsx)(i.Ny1,{})})]})]}),(0,n.jsx)("button",{onClick:u?()=>g&&m&&f?m!==f?s.oR.error("Passwords do not match"):void(O(!0),(0,c.xw)(t,g,m,()=>{s.oR.success("Password changed successfully!"),setTimeout(()=>e.push("/LoginSignUp"),1200),O(!1)},e=>{s.oR.error(e.message||"Failed to reset password"),O(!1)})):s.oR.error("All fields are required"):C,disabled:j,className:"w-full h-12 mt-8 rounded-lg text-lg font-semibold shadow \n            transition-all duration-200 text-white \n            ".concat(j?"bg-gray-400 cursor-not-allowed":"bg-green-600 hover:bg-green-700"),children:j?(0,n.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,n.jsx)("span",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):u?"Reset Password":"Send OTP"}),(0,n.jsx)("p",{onClick:()=>e.push("/LoginSignUp"),className:"text-sm text-green-600 hover:underline mt-6 text-center cursor-pointer",children:"Back to Sign In"})]}),(0,n.jsx)(s.ToastContainer,{})]})}}},e=>{e.O(0,[797,711,726,222,441,964,358],()=>e(e.s=4800)),_N_E=e.O()}]);