"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{5018:(e,a,l)=>{l.d(a,{A:()=>c});var r=l(5155),t=l(2115),s=l(4239),n=l(5799);l(5716);var o=l(5526);let i=[{name:"Nagar Auditorium",lat:"22.381599362662463",long:"73.14314073548469"},{name:"SOT Auditorium",lat:"22.385636040754616",long:"73.14493074913331"},{name:"Anviksha Building",lat:"22.3862105355751",long:"73.14561660211221"}];function d(e){let{items:a,display:l,value:s,onChange:n,placeholder:o="Search..."}=e,[i,d]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),m=(0,t.useRef)(null),g=(0,t.useMemo)(()=>{let e=i.toLowerCase().trim();return e?a.filter(a=>(l(a)||(null==a?void 0:a.name)||"".concat((null==a?void 0:a.first_name)||""," ").concat((null==a?void 0:a.last_name)||"").trim()||"").toLowerCase().includes(e)):a},[a,i,l]),x=(0,t.useMemo)(()=>{let e=a.find(e=>s&&(null==e?void 0:e._id)===s);return e?l(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim():""},[a,s,l]);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:m,type:"text",placeholder:o,value:c?i:x,onChange:e=>d(e.target.value),onFocus:()=>u(!0),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"}),c&&(0,r.jsxs)("div",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-60 overflow-auto",onMouseDown:e=>e.preventDefault(),children:[0===g.length&&(0,r.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}),g.map(e=>{let a=l(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim();return(0,r.jsx)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{var a;return a=e._id,void(null==n||n(a),u(!1),d(""))},children:a},e._id)})]})]})}function c(){let e,[a,l]=(0,t.useState)(!1),[c,u]=(0,t.useState)(""),[m,g]=(0,t.useState)([]),[x,p]=(0,t.useState)(""),[b,h]=(0,t.useState)(""),[f,v]=(0,t.useState)(""),[j,y]=(0,t.useState)("");(0,t.useEffect)(()=>{(async()=>{g(await (0,s.Pq)()||[])})()},[]);let N=async e=>{if(e.preventDefault(),!x)return void n.oR.error("Please select a speaker");l(!0);try{await (0,s.lh)(e,()=>n.oR.success("Event created successfully!"),e=>n.oR.error((null==e?void 0:e.message)||"Failed to create event")),e.target.reset(),u(""),p(""),h(""),v(""),y("")}finally{l(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg mt-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Create Event"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(o.default,{onUploadSuccess:u}),c&&(0,r.jsxs)("p",{className:"text-sm text-green-700 mt-2 break-all",children:["Uploaded: ",c]})]}),(0,r.jsxs)("form",{id:"createEvent",onSubmit:N,className:"space-y-6",children:[(0,r.jsx)("input",{type:"hidden",name:"speaker_ids",value:x||""}),(0,r.jsx)("input",{type:"hidden",name:"banner_url",value:c||""}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded",name:"mandatory",defaultChecked:!0}),(0,r.jsx)("label",{className:"text-gray-700",children:"Mandatory"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-1",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"title",name:"title",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("fieldset",{className:"border border-gray-200 p-4 rounded",children:[(0,r.jsx)("legend",{className:"font-semibold text-gray-700",children:"Description"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"detail",className:"block text-gray-700 mb-1",children:"Detail"}),(0,r.jsx)("textarea",{id:"detail",name:"detail",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Optional extra details about the event"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"objectives",className:"block text-gray-700 mb-1",children:["Objectives ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"objectives",name:"objectives",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"One per line"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"learning_outcomes",className:"block text-gray-700 mb-1",children:["Learning Outcomes ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"learning_outcomes",name:"learning_outcomes",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"One per line"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"start_time",className:"block text-gray-700 mb-1",children:"Start Time *"}),(0,r.jsx)("input",{type:"datetime-local",id:"start_time",name:"start_time",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"end_time",className:"block text-gray-700 mb-1",children:"End Time *"}),(0,r.jsx)("input",{type:"datetime-local",id:"end_time",name:"end_time",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]})]}),(0,r.jsxs)("fieldset",{className:"border border-gray-200 p-4 rounded bg-gray-50",children:[(0,r.jsx)("legend",{className:"font-semibold text-gray-700",children:"Location"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("label",{htmlFor:"address",className:"block text-gray-700 mb-1",children:["Address / Venue ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{id:"address",name:"address",required:!0,value:b,onChange:e=>{let a=e.target.value;h(a);let l=i.find(e=>e.name===a);l?(v(l.lat),y(l.long)):(v(""),y(""))},className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 bg-white",children:[(0,r.jsx)("option",{value:"",children:"-- Select a Venue --"}),i.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.name))]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lat",className:"block text-gray-700 mb-1",children:"Latitude"}),(0,r.jsx)("input",{type:"number",id:"lat",name:"lat",step:"any",value:f,onChange:e=>v(e.target.value),placeholder:"Auto-filled",className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"long",className:"block text-gray-700 mb-1",children:"Longitude"}),(0,r.jsx)("input",{type:"number",id:"long",name:"long",step:"any",value:j,onChange:e=>y(e.target.value),placeholder:"Auto-filled",className:"w-full border border-gray-300 rounded px-3 py-2 bg-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-400"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-1",children:"Speaker"}),(0,r.jsx)(d,{items:m,value:x,onChange:p,placeholder:"Search speaker by name",display:e=>(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()}),x&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",(null==(e=m.find(e=>e._id===x))?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()]})]}),(0,r.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-200 disabled:opacity-50",children:a?"Submitting...":"Create Event"})]}),(0,r.jsx)(n.ToastContainer,{})]})}},5526:(e,a,l)=>{l.r(a),l.d(a,{default:()=>c});var r=l(5155),t=l(2115),s=l(8637),n=l.n(s),o=l(5799),i=l(2105);let d=e=>{let{onUploadSuccess:a}=e,[l,s]=(0,t.useState)(null),[n,d]=(0,t.useState)(""),[c,u]=(0,t.useState)(!1),m=e=>{d(e.url),a(e.url),u(!1),o.oR.success("Image uploaded successfully!")},g=e=>{u(!1),o.oR.error("Image upload failed: "+e.message),console.error("Error uploading image:",e)};return(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!l)return void o.oR.error("Please select a file first.");u(!0),i.QM.handler(m,g)(e)},className:"flex flex-col gap-4 bg-gray-50 p-4 rounded-xl border border-gray-200",children:[(0,r.jsxs)("label",{htmlFor:"eventImage",className:"text-sm font-semibold text-gray-700",children:["Upload Speaker Image ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"file",id:"eventImage",name:"file",accept:"image/*",onChange:e=>{let a=e.target.files[0];a&&(s(URL.createObjectURL(a)),d(""))},disabled:c,className:"file:mr-3 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-100 file:text-green-700 hover:file:bg-green-200 cursor-pointer"}),l&&(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,r.jsx)("img",{src:l,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border"}),(0,r.jsx)("button",{type:"button",onClick:()=>{URL.revokeObjectURL(l),s(null),d(""),a("")},className:"text-sm text-red-500 hover:text-red-700 font-medium",children:"Remove"})]}),(0,r.jsx)("button",{type:"submit",disabled:!l||n||c,className:"px-4 py-2 rounded-lg text-white font-medium ".concat(c?"bg-green-400 cursor-wait":n?"bg-green-500 cursor-default":"bg-green-600 hover:bg-green-700"),children:c?"Uploading...":n?"Uploaded":"Upload"}),n&&(0,r.jsx)("input",{type:"hidden",name:"image_url",value:n})]})};d.propTypes={onUploadSuccess:n().func.isRequired};let c=d},6145:(e,a,l)=>{l.d(a,{A:()=>c});var r=l(5155),t=l(2115),s=l(5799),n=l(9911),o=l(5028);l(5716);var i=l(4239);let d=(0,o.default)(()=>Promise.resolve().then(l.bind(l,5526)),{loadableGenerated:{webpack:()=>[5526]},ssr:!1});function c(){let[e,a]=(0,t.useState)(""),[l,o]=(0,t.useState)(!1),[c,u]=(0,t.useState)(!1),[m,g]=(0,t.useState)(0),[x,p]=(0,t.useState)(!1),b={style:{background:"green",color:"white"}},h={style:{background:"red",color:"white"}},f={style:{background:"orange",color:"black"}};(0,t.useEffect)(()=>{if(m>0){let e=setTimeout(()=>g(e=>e-1),1e3);return()=>clearTimeout(e)}},[m]);let v=async e=>{if(!e.trim())return void s.oR.warning("Enter email first!",f);p(!0);try{let a=await (0,i.A$)(e,"verification");(null==a?void 0:a.success)?(s.oR.success("OTP sent!",b),g(15)):s.oR.error((null==a?void 0:a.message)||"Failed to send OTP!",h)}catch(e){s.oR.error("Error sending OTP!",h)}finally{p(!1)}},j=async l=>{l.preventDefault(),u(!0);let r=new FormData(l.target);return(console.log(Object.entries(r.entries())),e)?(r.get("password")||"").length<8?(s.oR.warning("Password must be at least 8 characters!",f),u(!1)):r.get("otp")?void(await (0,i.DY)({preventDefault:()=>{},target:l.target,submitter:l.nativeEvent.submitter},e=>{s.oR.success((null==e?void 0:e.message)||"Speaker registered!",b),l.target.reset(),a(""),g(0)},e=>s.oR.error((null==e?void 0:e.message)||"Failed to register speaker!",h)),u(!1)):(s.oR.warning("OTP required!",f),u(!1)):(s.oR.warning("Upload a speaker image!",f),u(!1))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-10",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl bg-white shadow-lg rounded-2xl p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-800",children:"Register a Speaker"}),(0,r.jsx)(d,{onUploadSuccess:a}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-5 mt-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{name:"name",placeholder:"Name",className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"nickname",placeholder:"Nickname",className:"p-3 border rounded-lg"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsx)("input",{name:"email",type:"email",placeholder:"Email",className:"flex-1 p-3 border rounded-lg"}),(0,r.jsx)("button",{type:"button",disabled:m>0,onClick:()=>v(document.querySelector("input[name='email']").value),className:"px-5 py-2 rounded-lg text-white ".concat(m>0?"bg-gray-400":"bg-green-600 hover:bg-green-700"),children:x?"Sending...":m>0?"Wait ".concat(m,"s"):"Get OTP"})]}),(0,r.jsx)("input",{name:"otp",placeholder:"OTP",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"role",type:"text",value:"Speaker",hidden:!0}),(0,r.jsx)("input",{name:"imageUrl",type:"text",value:e,hidden:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("select",{name:"gender",className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"Male",children:"Male"}),(0,r.jsx)("option",{value:"Female",children:"Female"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:l?"text":"password",name:"password",placeholder:"Password",className:"p-3 border rounded-lg w-full pr-10"}),(0,r.jsx)("button",{type:"button",onClick:()=>o(e=>!e),className:"absolute top-3 right-3 text-gray-600",children:l?(0,r.jsx)(n.Ny1,{}):(0,r.jsx)(n.mx3,{})})]})]}),(0,r.jsx)("textarea",{name:"about",placeholder:"About Speaker",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"organization",placeholder:"Organization",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("textarea",{name:"links",placeholder:"Speaker Links (comma separated)\\nExample: https://linkedin.com/in/xyz, https://google.com",className:"w-full p-3 border rounded-lg",rows:3}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 rounded-lg text-white ".concat(c?"bg-green-400":"bg-green-600 hover:bg-green-700"),children:c?"Submitting...":"Register"})]}),(0,r.jsx)(s.ToastContainer,{autoClose:2e3,hideProgressBar:!0,theme:"colored"})]})})}}}]);