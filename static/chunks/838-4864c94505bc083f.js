"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{960:(e,t,n)=>{n.d(t,{A:()=>a});let a={src:"/assets/static/media/logo.21932253.png",height:779,width:779,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEX////SwcD20dPzwr7t9fGfurt5nKro7e3J29ymysbforXaxM6rvsT74tnuqaDQo7fU4uj4/Pz59/Ww2dPZ3NjWuLvtwcTZ29XZ6euLwcDGvt3gnKOVusP78eayxdOdqbTZt8+Mr7ntycW5vtCoSi2zAAAACXBIWXMAABcRAAAXEQHKJvM/AAAARUlEQVR4nBXLxxGAIAAAwUOyKJhztv8eHfe/QFlmGcCTy5TGmj2mazn8hIzhLfzcMqxC34V2NH3YTuEVqM6Yyv7NOmfhA3Z3AwyhtdhdAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},2838:(e,t,n)=>{n.d(t,{default:()=>f});var a=n(5155),r=n(2115),l=n(4239),s=n(960),o=n(6766),i=n(6874),c=n.n(i),d=n(5799);function u(e){var t;let{id:n,heading:i,date:u,location:h,img:m,status:x}=e,[g,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{let e=!0;return(0,l.VU)().then(t=>{e&&f(t)}).catch(e=>{console.error(e),f(null)}),()=>{e=!1}},[]);let p=null==g||null==(t=g.role)?void 0:t.toLowerCase(),v="Ended"!==x,b=g&&"student"===p&&v,w=g&&"admin"===p,y=async()=>{try{let e=await (0,l.xF)("".concat(l.AS,"/api/attendances/").concat(n),"POST",{});d.oR.success(e.message)}catch(e){d.oR.error(e.message||"Failed to enroll")}},j=async()=>{if(window.confirm("Are you sure you want to delete this event? This action cannot be undone."))try{let e=await (0,l.xF)("".concat(l.AS,"/api/events/").concat(n),"DELETE",{});d.oR.success(e.message||"Event deleted successfully"),window.location.reload()}catch(e){if(e.message&&(e.message.includes("end of JSON input")||e.message.includes("JSON"))){d.oR.success("Event deleted successfully"),window.location.reload();return}d.oR.error(e.message||"Failed to delete event")}};return(0,a.jsx)("div",{className:"w-full p-3",children:(0,a.jsxs)("div",{className:"group relative flex flex-col h-full bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-xl hover:-translate-y-1 transition-all duration-300 overflow-hidden",children:[x&&(0,a.jsx)("div",{className:"absolute top-3 right-3 z-20",children:(0,a.jsx)("span",{className:"px-3 py-1 text-xs font-bold uppercase tracking-wide rounded-full border ".concat((e=>{switch(e){case"Ended":return"bg-slate-100 text-slate-600 border-slate-200";case"Ongoing":return"bg-emerald-50 text-emerald-700 border-emerald-200 ring-1 ring-emerald-500/20";case"Upcoming":return"bg-indigo-50 text-indigo-700 border-indigo-200 ring-1 ring-indigo-500/20";default:return"bg-gray-100 text-gray-800"}})(x)," shadow-sm backdrop-blur-md"),children:x})}),(0,a.jsx)(c(),{href:"/events/detail?id=".concat(n),className:"block overflow-hidden relative",children:(0,a.jsx)("div",{className:"relative w-full aspect-[4/3] bg-slate-100",children:(0,a.jsx)(o.default,{src:m||s.A,alt:i||"Event Image",fill:!0,className:"object-cover transition-transform duration-500 group-hover:scale-105 ".concat("Ended"===x?"opacity-60 grayscale":""),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"})})}),(0,a.jsxs)("div",{className:"flex flex-col flex-grow p-5",children:[(0,a.jsx)("div",{className:"flex items-center gap-2 mb-2",children:(0,a.jsxs)("div",{className:"inline-flex items-center gap-1.5 px-2.5 py-0.5 rounded-md bg-slate-50 text-slate-600 text-xs font-semibold border border-slate-100",children:[(0,a.jsx)("span",{children:"\uD83D\uDCC5"}),(null==u?void 0:u.year)&&"N/A"!==u.year?"".concat(u.day||u.date||"01","/").concat(u.month,"/").concat(u.year):"TBA"]})}),(0,a.jsx)(c(),{href:"/events/detail?id=".concat(n),className:"block",children:(0,a.jsx)("h3",{className:"text-lg font-bold text-slate-800 leading-snug mb-3 line-clamp-2 group-hover:text-indigo-600 transition-colors",children:i})}),(0,a.jsxs)("div",{className:"mt-auto flex items-start gap-2 text-slate-500 text-sm",children:[(0,a.jsx)("span",{children:"\uD83D\uDCCD"}),(0,a.jsx)("span",{className:"line-clamp-1 font-medium",children:h||"Location TBD"})]}),(0,a.jsxs)("div",{className:"mt-5 pt-4 border-t border-slate-100 flex flex-col gap-3",children:[b&&(0,a.jsx)("button",{onClick:y,className:"w-full inline-flex justify-center items-center gap-2 bg-indigo-600 text-white py-2.5 px-4 rounded-xl text-sm font-semibold shadow-sm hover:bg-indigo-700 hover:shadow-md active:transform active:scale-95 transition-all",children:(0,a.jsx)("span",{children:"Enroll Now"})}),w&&(0,a.jsxs)("button",{onClick:j,className:"w-full inline-flex justify-center items-center gap-2 bg-red-50 text-red-600 border border-red-200 py-2.5 px-4 rounded-xl text-sm font-semibold shadow-sm hover:bg-red-600 hover:text-white hover:border-red-600 transition-all active:transform active:scale-95",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("path",{d:"M3 6h18"}),(0,a.jsx)("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),(0,a.jsx)("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]}),(0,a.jsx)("span",{children:"Delete Event"})]})]})]})]})})}var h=n(5695),m=n(8020);function x(e){let{children:t}=e,[n,l]=(0,r.useState)(!1),s=(0,h.usePathname)();return(0,r.useEffect)(()=>{l(!0);let e=setTimeout(()=>{l(!1)},800);return()=>clearTimeout(e)},[s]),(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(m.A,{}),t]})}let g={all:"/api/events",upcoming:"/api/events/upcoming",ongoing:"/api/events/ongoing",ended:"/api/events/ended"};function f(){let[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)("all"),[o,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),f=(0,r.useRef)(0);(0,r.useEffect)(()=>{let e=++f.current,a=!1;return(async()=>{i(!0),d("");try{let r;if("all"===n&&"function"==typeof l.kQ)r=await (0,l.kQ)();else{let e=g[n]||g.all;r=await (0,l.In)("".concat(l.AS).concat(e),"GET")}if(a||e!==f.current)return;let s=Array.isArray(r)?r:(null==r?void 0:r.events)||[];s.sort((e,t)=>{let n=new Date(e.start_time||0);return new Date(t.start_time||0)-n}),t(s)}catch(t){if(a||e!==f.current)return;d((null==t?void 0:t.message)||"Failed to load events")}finally{if(a||e!==f.current)return;i(!1)}})(),()=>{a=!0}},[n]);let p=e.filter(e=>{var t,n,a;let r=h.toLowerCase(),l=(null==(t=e.title)?void 0:t.toLowerCase())||"",s=(null==(a=e.location)||null==(n=a.address)?void 0:n.toLowerCase())||"";return l.includes(r)||s.includes(r)});return o?(0,a.jsx)(x,{}):c?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[(0,a.jsx)("div",{className:"text-red-500 bg-red-50 p-3 rounded-full mb-4",children:(0,a.jsx)("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,a.jsx)("p",{className:"text-gray-800 font-medium",children:c}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 text-blue-600 hover:underline",children:"Try Again"})]}):(0,a.jsxs)("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,a.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Explore Events"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Discover what's happening around campus"})]}),(0,a.jsxs)("div",{className:"relative w-full md:w-80",children:[(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,a.jsx)("input",{type:"text",placeholder:"Search events...",value:h,onChange:e=>m(e.target.value),className:"block w-full pl-10 pr-3 py-2.5 border border-gray-200 rounded-xl leading-5 bg-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition duration-150 ease-in-out shadow-sm"})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-8",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-6 overflow-x-auto no-scrollbar","aria-label":"Tabs",children:["all","upcoming","ongoing","ended"].map(e=>{let t=n===e;return(0,a.jsx)("button",{onClick:()=>{s(e),m("")},className:"\n                  whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors duration-200\n                  ".concat(t?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300","\n                "),children:e.charAt(0).toUpperCase()+e.slice(1)},e)})})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:[0===p.length&&(0,a.jsxs)("div",{className:"col-span-full flex flex-col items-center justify-center py-16 text-center",children:[(0,a.jsx)("div",{className:"bg-gray-50 rounded-full p-4 mb-4",children:(0,a.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"No events found"}),(0,a.jsx)("p",{className:"mt-1 text-gray-500",children:h?"We couldn't find anything matching \"".concat(h,'"'):"Check back later for new events!"}),h&&(0,a.jsx)("button",{onClick:()=>m(""),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Clear Search"})]}),p.map(e=>{var t;let n=(null==e?void 0:e.start_time)?new Date(e.start_time):null,r=(null==e?void 0:e.end_time)?new Date(e.end_time):null,s=new Date,o=n?n.getFullYear():"N/A",i=n?n.getMonth()+1:"N/A",c="Upcoming";return r&&s>r?c="Ended":n&&r&&s>=n&&s<=r&&(c="Ongoing"),(0,a.jsx)(u,{id:e._id||e.id,heading:e.title,date:{year:o,month:i},location:(null==e||null==(t=e.location)?void 0:t.address)||"Unknown",img:(null==e?void 0:e.image)?"".concat(l.AS).concat(e.image):void 0,status:c},e._id||e.id)})]})]})}},4239:(e,t,n)=>{n.d(t,{A$:()=>a.A$,AS:()=>a.AS,DY:()=>a.DY,In:()=>a.In,Pq:()=>a.Pq,VU:()=>a.VU,Yq:()=>a.Yq,bB:()=>a.bB,eg:()=>a.eg,iD:()=>a.iD,kQ:()=>a.kQ,lh:()=>a.lh,lo:()=>a.lo,qM:()=>a.qM,s_:()=>a.s_,tq:()=>a.tq,xF:()=>a.xF,xw:()=>a.xw,zz:()=>a.zz});var a=n(2105);n(8222),n(8782)},8020:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(5155),r=n(6766),l=n(8274);function s(){return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-white",children:[(0,a.jsx)(l.P.div,{initial:{scale:.8,opacity:.5},animate:{scale:[.9,1.1,.9],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute w-64 h-64 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 blur-3xl opacity-30"}),(0,a.jsx)(l.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},children:(0,a.jsx)(r.default,{src:"/loader.png",alt:"Loading...",width:200,height:200,priority:!0,className:"drop-shadow-lg"})}),(0,a.jsx)(l.P.p,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0},className:"mt-6 text-lg font-semibold text-gray-600",children:"Loading..."})]})}},8782:(e,t,n)=>{n.d(t,{Bv:()=>a,QZ:()=>l,dm:()=>i,gR:()=>o,lm:()=>r});let a=e=>new Date(new Date(e)-6e4*new Date().getTimezoneOffset()).toISOString().slice(0,16),r={primary:["#3B82F6","#8B5CF6","#EC4899","#F59E0B","#10B981"],status:{present:"#10B981",absent:"#EF4444",late:"#F59E0B",exc:"#3B82F6"},geo:["#10B981","#EF4444","#9CA3AF"]},l={"school-branch":{"School of Technology":["B.Tech.","BCA"],"School of Science":["B.Sc."],"School of Management Studies and Liberal Arts":["B.Com.","BBA"]},"branch-stream":{"B.Tech.":["Chemical","Chemical D2D","Computer Science & Engg.","Computer Science & Engg. D2D","Fire & EHS","Fire & EHS. D2D"],BCA:["General"],"B.Sc.":["Biotechnology","Chemistry","Data Science","Micro Biology"],"B.Com.":["/ B.Com (Hons.)"],BBA:["Business Analytics","HR / Marketing /Accounting & Finance / IT Mg"]}},s=e=>{try{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}catch(e){return null}},o=e=>(e&&"object"==typeof e?e._id:e)||"",i=e=>Array.isArray(e)?e.map(e=>{var t,n,a,r,i,c,d,u;let h=e.user_id||{},{school:m,degree:x,stream:g}=(e=>{if(!e)return{school:"Other",degree:"Other",stream:"Unknown"};let t=e.trim();for(let[e,n]of Object.entries(l["school-branch"]))for(let a of n)if(t.includes(a)){let n=t.replace(a,"").replace(/^[\.\/\-\s]+/,"").trim();if(l["branch-stream"][a]){let e=l["branch-stream"][a].find(e=>n.toLowerCase().includes(e.toLowerCase())||e.toLowerCase().includes(n.toLowerCase()));e&&(n=e)}return{school:e,degree:a,stream:n||"General"}}return{school:"Other",degree:"Other",stream:t}})(e.branch||h.branch||"Unknown"),f=null==(n=e.locations)||null==(t=n[0])?void 0:t.lat,p=null==(r=e.locations)||null==(a=r[0])?void 0:a.long,v=((e,t,n,a)=>{if(!e||!t||!n||!a)return null;let r=e=>e*Math.PI/180,l=Math.sin(r(n-e)/2)**2+Math.cos(r(e))*Math.cos(r(n))*Math.sin(r(a-t)/2)**2;return 12742e3*Math.atan2(Math.sqrt(l),Math.sqrt(1-l))})(f,p,null==(c=e.locations)||null==(i=c.at(-1))?void 0:i.lat,null==(u=e.locations)||null==(d=u.at(-1))?void 0:d.long),b="no-locations";return b=e.locations&&0!==e.locations.length?1===e.locations.length?"single":null!==v&&v<=500?"in":"out":"no-locations",{...e,_eventId:o(e.event_id),_parsedInDate:s(e.punch_in_time),_parsedOutDate:s(e.punch_out_time),_school:m,_degree:x,_stream:g,_year:(e.year||h.year||"Unknown").toString(),_searchName:(e.name||h.name||"").toLowerCase(),_searchBranch:(e.branch||h.branch||"").toString().trim().toLowerCase(),_searchYear:(e.year||h.year||"").toString().trim().toLowerCase(),_searchEnroll:(e.enrollment_id||h.enrollment_id||"").toString().toLowerCase(),_dist:v,_distBucket:b,_distValid:null!==v&&v<=500}}):[]}}]);