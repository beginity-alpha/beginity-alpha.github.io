(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[411],{2534:(e,t,a)=>{"use strict";a.a(e,async(e,r)=>{try{a.d(t,{default:()=>x});var l=a(5155),s=a(2115),n=a(5799);a(5716);var i=a(3577),o=a(283),d=a(5018),c=a(6145),u=a(4239),m=e([o]);o=(m.then?(await m)():m)[0];let x=()=>{let[e,t]=(0,s.useState)("attendance");return(0,l.jsxs)("div",{className:"p-4 sm:p-6 md:p-8 font-sans bg-gray-50 min-h-screen",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-2xl md:text-3xl font-semibold text-gray-800 text-center md:text-left",children:"\uD83D\uDC69‍\uD83C\uDFEB Teacher Management Dashboard"}),(0,l.jsx)("button",{onClick:u.eg.handler(()=>{window.location.href="/LoginSignUp"},e=>console.error(e)),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-all duration-300",children:"Logout"})]}),(0,l.jsx)("div",{className:"flex flex-wrap justify-center md:justify-start border-b border-gray-300 mb-6",children:[{id:"attendance",label:"Attendance"},{id:"classroom",label:"Classroom Live"},{id:"create-event",label:"Create Event"},{id:"create-speaker",label:"Register Speaker"}].map(a=>(0,l.jsx)("button",{onClick:()=>t(a.id),className:"flex-1 md:flex-none px-4 py-2 text-sm sm:text-base text-center transition-all duration-300 \n              border-b-4 ".concat(e===a.id?"border-blue-500 font-semibold text-blue-600":"border-transparent text-gray-600 hover:text-blue-500"),children:a.label},a.id))}),(0,l.jsx)("div",{className:"bg-white rounded-xl shadow-md p-4 sm:p-6 overflow-auto",children:(()=>{switch(e){case"attendance":return(0,l.jsx)(i.A,{});case"classroom":return(0,l.jsx)(o.A,{});case"create-event":return(0,l.jsx)(d.A,{});case"create-speaker":return(0,l.jsx)(c.A,{});default:return(0,l.jsx)("div",{className:"text-gray-500",children:"Select an option from the tabs."})}})()}),(0,l.jsx)(n.ToastContainer,{})]})};r()}catch(e){r(e)}})},3577:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(5155),l=a(2115),s=a(4239);let n=e=>{try{if(!e)return null;let t=new Date(e);return isNaN(t.getTime())?null:t}catch(e){return null}},i=e=>e?"string"==typeof e?e:e._id||"":"",o=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;try{var r;return null!=(r=t.split(".").reduce((e,t)=>e?e[t]:void 0,e))?r:a}catch(e){return a}},d=()=>{let[e,t]=(0,l.useState)([]),[a,d]=(0,l.useState)([]),[c,u]=(0,l.useState)(!0),[m,x]=(0,l.useState)(""),[p,h]=(0,l.useState)(""),[g,b]=(0,l.useState)(""),[f,v]=(0,l.useState)(""),[j,y]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[_,S]=(0,l.useState)(""),[k,A]=(0,l.useState)("");(0,l.useEffect)(()=>{C(),L()},[]),(0,l.useEffect)(()=>{L()},[p]);let C=async()=>{try{let e=await fetch("".concat(s.AS,"/api/events")),t=await e.json();if(!(null==t?void 0:t.events)||!Array.isArray(t.events))throw Error("Invalid events data format");d(t.events)}catch(e){console.error("Event fetch error:",e)}},L=async()=>{u(!0),x("");try{await (0,s.Yq)({event_id:p||void 0},e=>{let a=(Array.isArray(null==e?void 0:e.data)?e.data:[]).map(e=>({...e,_eventId:i(e.event_id),_userId:i(e.user_id)})).sort((e,t)=>{let a=n(e.punch_in_time),r=n(t.punch_in_time);return a&&r?r-a:a&&!r?-1:!a&&r?1:0});t(a)},e=>x((null==e?void 0:e.message)||"Error fetching attendance"))}catch(e){x((null==e?void 0:e.message)||"Fetch failed")}finally{u(!1)}},E=e=>{let t=i(e);if(!t)return"N/A";let r=a.find(e=>i(e._id)===t);return(null==r?void 0:r.title)||o(e,"title")||"N/A"},R=e=>{if(!Array.isArray(e)||0===e.length)return"no-locations";if(1===e.length)return"single";let t=e[0],a=e[e.length-1],r=((e,t,a,r)=>{let l=e=>e*Math.PI/180;if([e,t,a,r].some(e=>null==e||Number.isNaN(Number(e))))return null;let s=l(Number(e)),n=l(Number(a)),i=Math.sin(l(Number(a)-Number(e))/2)**2+Math.cos(s)*Math.cos(n)*Math.sin(l(Number(r)-Number(t))/2)**2;return 2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i))*6371e3})(null==t?void 0:t.lat,null==t?void 0:t.long,null==a?void 0:a.lat,null==a?void 0:a.long);return null===r?"no-locations":r<=15?"in":"out"},D=(0,l.useMemo)(()=>{let t=new Set;return e.forEach(e=>e.status&&t.add(e.status)),Array.from(t)},[e]),O=(0,l.useMemo)(()=>e.filter(e=>{var t;let a=(e.name||o(e,"user_id.name","")).toLowerCase(),r=(e.branch||o(e,"user_id.branch","")||"").toString().trim().toLowerCase(),l=(e.year||o(e,"user_id.year","")||"").toString().trim().toLowerCase(),s=(e.enrollment_id||o(e,"user_id.enrollment_id","")).toString().toLowerCase(),n=!p||i(e.event_id)===p,d=!g||(null==(t=e.status)?void 0:t.toLowerCase())===g.toLowerCase(),c=R(e.locations),u=!f||c===f,m=!j||a.includes(j.toLowerCase()),x=!N||r.includes(N.trim().toLowerCase()),h=!_||s.includes(_.trim().toLowerCase()),b=!k||l.includes(k.trim().toLowerCase());return n&&d&&u&&m&&x&&h&&b}),[e,p,g,f,j,N,_,k]);return c?(0,r.jsx)("div",{className:"py-10 text-center",children:"Loading..."}):m?(0,r.jsx)("div",{className:"py-10 text-center text-red-600",children:m}):(0,r.jsxs)("div",{className:"p-6 bg-gray-50 min-h-screen",children:[(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-6 gap-4",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold",children:"Attendance Management"}),(0,r.jsx)("button",{onClick:()=>(e=>{if(!e.length)return alert("No data to export");let t=[["Event Name","User Name","Nickname","Enrollment ID","Branch","Year","Status","Punch In","Punch Out","Punch In Location","Punch Out Location","Distance Bucket"],...e.map(e=>{let t=e.branch||o(e,"user_id.branch","N/A"),a=e.year||o(e,"user_id.year","N/A"),r=E(e.event_id),l=e.name||o(e,"user_id.name","N/A"),s=e.nickname||o(e,"user_id.nickname","N/A"),i=e.enrollment_id||o(e,"user_id.enrollment_id","N/A"),d=n(e.punch_in_time),c=n(e.punch_out_time),u=Array.isArray(e.locations)?e.locations:[],m=u[0],x=u[u.length-1],p=R(u);return[r,l,s,i,t,a,e.status,d?d.toLocaleString():"N/A",c?c.toLocaleString():"N/A",m?"".concat(m.lat,", ").concat(m.long):"N/A",x?"".concat(x.lat,", ").concat(x.long):"N/A",p.toUpperCase()]})].map(e=>e.map(e=>'"'.concat(String(e).replace(/"/g,'""'),'"')).join(",")).join("\n"),a=URL.createObjectURL(new Blob([t],{type:"text/csv"})),r=document.createElement("a");r.href=a,r.download="attendance.csv",r.click(),URL.revokeObjectURL(a)})(O),className:"bg-green-600 text-white px-4 py-2 rounded-lg shadow hover:bg-green-700",children:"\uD83D\uDCE5 Download CSV (All)"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-6 gap-4 bg-white p-4 rounded-md shadow mb-8",children:[(0,r.jsxs)("select",{value:p,onChange:e=>h(e.target.value),className:"border p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"All Events"}),a.map(e=>(0,r.jsx)("option",{value:i(e._id),children:e.title},i(e._id)))]}),(0,r.jsxs)("select",{value:g,onChange:e=>b(e.target.value),className:"border p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"All Status"}),D.map(e=>(0,r.jsx)("option",{children:e},e))]}),(0,r.jsxs)("select",{value:f,onChange:e=>v(e.target.value),className:"border p-2 rounded",children:[(0,r.jsx)("option",{value:"",children:"Distance (All)"}),(0,r.jsx)("option",{value:"in",children:"IN (≤15m)"}),(0,r.jsx)("option",{value:"out",children:"OUT (>15m)"}),(0,r.jsx)("option",{value:"single",children:"Single"}),(0,r.jsx)("option",{value:"no-locations",children:"No Locations"})]}),(0,r.jsx)("input",{type:"text",placeholder:"Search Name",value:j,onChange:e=>y(e.target.value),className:"border p-2 rounded"}),(0,r.jsx)("input",{type:"text",placeholder:"Search Branch",value:N,onChange:e=>w(e.target.value),className:"border p-2 rounded"}),(0,r.jsx)("input",{type:"text",placeholder:"Search Year",value:k,onChange:e=>A(e.target.value),className:"border p-2 rounded"}),(0,r.jsx)("input",{type:"text",placeholder:"Enrollment",value:_,onChange:e=>S(e.target.value),className:"border p-2 rounded"})]}),(0,r.jsx)("div",{className:"overflow-x-auto bg-white shadow rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200",children:[(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Event"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"User"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Nickname"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Enrollment"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Branch"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Year"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Status"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Punch In"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Punch Out"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"In Location"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"Out Location"}),(0,r.jsx)("th",{className:"px-4 py-2 text-left",children:"15m"})]})}),(0,r.jsx)("tbody",{children:O.map((e,t)=>{let a=E(e.event_id),l=e.name||o(e,"user_id.name","N/A"),s=e.nickname||o(e,"user_id.nickname","N/A"),i=e.enrollment_id||o(e,"user_id.enrollment_id","N/A"),d=e.branch||o(e,"user_id.branch","N/A"),c=e.year||o(e,"user_id.year","N/A"),u=n(e.punch_in_time),m=n(e.punch_out_time),x=Array.isArray(e.locations)?e.locations:[],p=x[0],h=x[x.length-1],g=R(x);return(0,r.jsxs)("tr",{className:"border-b",children:[(0,r.jsx)("td",{className:"px-4 py-2",children:a}),(0,r.jsx)("td",{className:"px-4 py-2",children:l}),(0,r.jsx)("td",{className:"px-4 py-2",children:s}),(0,r.jsx)("td",{className:"px-4 py-2",children:i}),(0,r.jsx)("td",{className:"px-4 py-2",children:d}),(0,r.jsx)("td",{className:"px-4 py-2",children:c}),(0,r.jsx)("td",{className:"px-4 py-2",children:e.status}),(0,r.jsx)("td",{className:"px-4 py-2",children:u?u.toLocaleString():"N/A"}),(0,r.jsx)("td",{className:"px-4 py-2",children:m?m.toLocaleString():"N/A"}),(0,r.jsx)("td",{className:"px-4 py-2",children:p?"".concat(p.lat,", ").concat(p.long):"N/A"}),(0,r.jsx)("td",{className:"px-4 py-2",children:h?"".concat(h.lat,", ").concat(h.long):"N/A"}),(0,r.jsx)("td",{className:"px-4 py-2",children:"in"===g?"✔️":"out"===g?"❌":"single"===g?"•":"N/A"})]},e._id||t)})})]})}),0===O.length&&(0,r.jsx)("div",{className:"mt-6 text-center text-gray-600",children:"No records found."})]})}},5018:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var r=a(5155),l=a(2115),s=a(4239),n=a(5799);a(5716);var i=a(5526);function o(e){let{items:t,display:a,value:s,onChange:n,placeholder:i="Search..."}=e,[o,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1),m=(0,l.useRef)(null),x=(0,l.useMemo)(()=>{let e=o.toLowerCase().trim();return e?t.filter(t=>(a(t)||(null==t?void 0:t.name)||"".concat((null==t?void 0:t.first_name)||""," ").concat((null==t?void 0:t.last_name)||"").trim()||"").toLowerCase().includes(e)):t},[t,o,a]),p=(0,l.useMemo)(()=>{let e=t.find(e=>s&&(null==e?void 0:e._id)===s);return e?a(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim():""},[t,s,a]);return(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{ref:m,type:"text",placeholder:i,value:c?o:p,onChange:e=>d(e.target.value),onFocus:()=>u(!0),className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"}),c&&(0,r.jsxs)("div",{className:"absolute z-20 mt-1 w-full bg-white border border-gray-200 rounded shadow max-h-60 overflow-auto",onMouseDown:e=>e.preventDefault(),children:[0===x.length&&(0,r.jsx)("div",{className:"px-3 py-2 text-sm text-gray-500",children:"No results"}),x.map(e=>{let t=a(e)||(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim();return(0,r.jsx)("button",{type:"button",className:"w-full text-left px-3 py-2 hover:bg-gray-50",onClick:()=>{var t;return t=e._id,void(null==n||n(t),u(!1),d(""))},children:t},e._id)})]})]})}function d(){let e,[t,a]=(0,l.useState)(!1),[d,c]=(0,l.useState)(""),[u,m]=(0,l.useState)([]),[x,p]=(0,l.useState)("");(0,l.useEffect)(()=>{(async()=>{m(await (0,s.Pq)()||[])})()},[]);let h=async e=>{if(e.preventDefault(),!x)return void n.oR.error("Please select a speaker");a(!0);try{await (0,s.lh)(e,()=>n.oR.success("Event created successfully!"),e=>n.oR.error((null==e?void 0:e.message)||"Failed to create event")),e.target.reset(),c(""),p("")}finally{a(!1)}};return(0,r.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg mt-6",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Create Event"}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)(i.default,{onUploadSuccess:c}),d&&(0,r.jsxs)("p",{className:"text-sm text-green-700 mt-2 break-all",children:["Uploaded: ",d]})]}),(0,r.jsxs)("form",{id:"createEvent",onSubmit:h,className:"space-y-6",children:[(0,r.jsx)("input",{type:"hidden",name:"speaker_ids",value:x||""}),(0,r.jsx)("input",{type:"hidden",name:"banner_url",value:d||""}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",className:"h-4 w-4 text-blue-600 border-gray-300 rounded",name:"mandatory",defaultChecked:!0}),(0,r.jsx)("label",{className:"text-gray-700",children:"Mandatory"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{htmlFor:"title",className:"block text-gray-700 font-medium mb-1",children:["Title ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{id:"title",name:"title",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("fieldset",{className:"border border-gray-200 p-4 rounded",children:[(0,r.jsx)("legend",{className:"font-semibold text-gray-700",children:"Description"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{htmlFor:"detail",className:"block text-gray-700 mb-1",children:"Detail"}),(0,r.jsx)("textarea",{id:"detail",name:"detail",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Optional extra details about the event"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"objectives",className:"block text-gray-700 mb-1",children:["Objectives ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"objectives",name:"objectives",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"One per line"})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsxs)("label",{htmlFor:"learning_outcomes",className:"block text-gray-700 mb-1",children:["Learning Outcomes ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{id:"learning_outcomes",name:"learning_outcomes",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"One per line"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"start_time",className:"block text-gray-700 mb-1",children:"Start Time *"}),(0,r.jsx)("input",{type:"datetime-local",id:"start_time",name:"start_time",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"end_time",className:"block text-gray-700 mb-1",children:"End Time *"}),(0,r.jsx)("input",{type:"datetime-local",id:"end_time",name:"end_time",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]})]}),(0,r.jsxs)("fieldset",{className:"border border-gray-200 p-4 rounded",children:[(0,r.jsx)("legend",{className:"font-semibold text-gray-700",children:"Location"}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsx)("label",{htmlFor:"address",className:"block text-gray-700 mb-1",children:"Address *"}),(0,r.jsx)("input",{id:"address",name:"address",required:!0,className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"lat",className:"block text-gray-700 mb-1",children:"Latitude"}),(0,r.jsx)("input",{type:"number",id:"lat",name:"lat",step:"any",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"long",className:"block text-gray-700 mb-1",children:"Longitude"}),(0,r.jsx)("input",{type:"number",id:"long",name:"long",step:"any",className:"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400"})]})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 mb-1",children:"Speaker"}),(0,r.jsx)(o,{items:u,value:x,onChange:p,placeholder:"Search speaker by name",display:e=>(null==e?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()}),x&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mt-2",children:["Selected: ",(null==(e=u.find(e=>e._id===x))?void 0:e.name)||"".concat((null==e?void 0:e.first_name)||""," ").concat((null==e?void 0:e.last_name)||"").trim()]})]}),(0,r.jsx)("button",{type:"submit",disabled:t,className:"w-full bg-green-700 text-white font-semibold py-2 px-4 rounded transition duration-200 disabled:opacity-50",children:t?"Submitting...":"Create Event"})]}),(0,r.jsx)(n.ToastContainer,{})]})}},5526:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(5155),l=a(2115),s=a(8637),n=a.n(s),i=a(5799),o=a(2105);let d=e=>{let{onUploadSuccess:t}=e,[a,s]=(0,l.useState)(null),[n,d]=(0,l.useState)(""),[c,u]=(0,l.useState)(!1),m=e=>{d(e.url),t(e.url),u(!1),i.oR.success("Image uploaded successfully!")},x=e=>{u(!1),i.oR.error("Image upload failed: "+e.message),console.error("Error uploading image:",e)};return(0,r.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a)return void i.oR.error("Please select a file first.");u(!0),o.QM.handler(m,x)(e)},className:"flex flex-col gap-4 bg-gray-50 p-4 rounded-xl border border-gray-200",children:[(0,r.jsxs)("label",{htmlFor:"eventImage",className:"text-sm font-semibold text-gray-700",children:["Upload Speaker Image ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"file",id:"eventImage",name:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&(s(URL.createObjectURL(t)),d(""))},disabled:c,className:"file:mr-3 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-green-100 file:text-green-700 hover:file:bg-green-200 cursor-pointer"}),a&&(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,r.jsx)("img",{src:a,alt:"Preview",className:"w-20 h-20 object-cover rounded-lg border"}),(0,r.jsx)("button",{type:"button",onClick:()=>{URL.revokeObjectURL(a),s(null),d(""),t("")},className:"text-sm text-red-500 hover:text-red-700 font-medium",children:"Remove"})]}),(0,r.jsx)("button",{type:"submit",disabled:!a||n||c,className:"px-4 py-2 rounded-lg text-white font-medium ".concat(c?"bg-green-400 cursor-wait":n?"bg-green-500 cursor-default":"bg-green-600 hover:bg-green-700"),children:c?"Uploading...":n?"Uploaded":"Upload"}),n&&(0,r.jsx)("input",{type:"hidden",name:"image_url",value:n})]})};d.propTypes={onUploadSuccess:n().func.isRequired};let c=d},6145:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var r=a(5155),l=a(2115),s=a(5799),n=a(9911),i=a(5028);a(5716);var o=a(4239);let d=(0,i.default)(()=>Promise.resolve().then(a.bind(a,5526)),{loadableGenerated:{webpack:()=>[5526]},ssr:!1});function c(){let[e,t]=(0,l.useState)(""),[a,i]=(0,l.useState)(!1),[c,u]=(0,l.useState)(!1),[m,x]=(0,l.useState)(0),[p,h]=(0,l.useState)(!1),g={style:{background:"green",color:"white"}},b={style:{background:"red",color:"white"}},f={style:{background:"orange",color:"black"}};(0,l.useEffect)(()=>{if(m>0){let e=setTimeout(()=>x(e=>e-1),1e3);return()=>clearTimeout(e)}},[m]);let v=async e=>{if(!e.trim())return void s.oR.warning("Enter email first!",f);h(!0);try{let t=await (0,o.A$)(e,"verification");(null==t?void 0:t.success)?(s.oR.success("OTP sent!",g),x(15)):s.oR.error((null==t?void 0:t.message)||"Failed to send OTP!",b)}catch(e){s.oR.error("Error sending OTP!",b)}finally{h(!1)}},j=async a=>{a.preventDefault(),u(!0);let r=new FormData(a.target);return(console.log(Object.entries(r.entries())),e)?(r.get("password")||"").length<8?(s.oR.warning("Password must be at least 8 characters!",f),u(!1)):r.get("otp")?void(await (0,o.DY)({preventDefault:()=>{},target:a.target,submitter:a.nativeEvent.submitter},e=>{s.oR.success((null==e?void 0:e.message)||"Speaker registered!",g),a.target.reset(),t(""),x(0)},e=>s.oR.error((null==e?void 0:e.message)||"Failed to register speaker!",b)),u(!1)):(s.oR.warning("OTP required!",f),u(!1)):(s.oR.warning("Upload a speaker image!",f),u(!1))};return(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4 py-10",children:(0,r.jsxs)("div",{className:"w-full max-w-2xl bg-white shadow-lg rounded-2xl p-8",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center text-gray-800",children:"Register a Speaker"}),(0,r.jsx)(d,{onUploadSuccess:t}),(0,r.jsxs)("form",{onSubmit:j,className:"space-y-5 mt-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsx)("input",{name:"name",placeholder:"Name",className:"p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"nickname",placeholder:"Nickname",className:"p-3 border rounded-lg"})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,r.jsx)("input",{name:"email",type:"email",placeholder:"Email",className:"flex-1 p-3 border rounded-lg"}),(0,r.jsx)("button",{type:"button",disabled:m>0,onClick:()=>v(document.querySelector("input[name='email']").value),className:"px-5 py-2 rounded-lg text-white ".concat(m>0?"bg-gray-400":"bg-green-600 hover:bg-green-700"),children:p?"Sending...":m>0?"Wait ".concat(m,"s"):"Get OTP"})]}),(0,r.jsx)("input",{name:"otp",placeholder:"OTP",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"role",type:"text",value:"Speaker",hidden:!0}),(0,r.jsx)("input",{name:"imageUrl",type:"text",value:e,hidden:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("select",{name:"gender",className:"p-3 border rounded-lg",children:[(0,r.jsx)("option",{value:"Male",children:"Male"}),(0,r.jsx)("option",{value:"Female",children:"Female"})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("input",{type:a?"text":"password",name:"password",placeholder:"Password",className:"p-3 border rounded-lg w-full pr-10"}),(0,r.jsx)("button",{type:"button",onClick:()=>i(e=>!e),className:"absolute top-3 right-3 text-gray-600",children:a?(0,r.jsx)(n.Ny1,{}):(0,r.jsx)(n.mx3,{})})]})]}),(0,r.jsx)("textarea",{name:"about",placeholder:"About Speaker",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("input",{name:"organization",placeholder:"Organization",className:"w-full p-3 border rounded-lg"}),(0,r.jsx)("textarea",{name:"links",placeholder:"Speaker Links (comma separated)\\nExample: https://linkedin.com/in/xyz, https://google.com",className:"w-full p-3 border rounded-lg",rows:3}),(0,r.jsx)("button",{type:"submit",disabled:c,className:"w-full py-3 rounded-lg text-white ".concat(c?"bg-green-400":"bg-green-600 hover:bg-green-700"),children:c?"Submitting...":"Register"})]}),(0,r.jsx)(s.ToastContainer,{autoClose:2e3,hideProgressBar:!0,theme:"colored"})]})})}},9992:(e,t,a)=>{Promise.resolve().then(a.bind(a,2534))}},e=>{e.O(0,[797,711,311,298,766,799,888,283,441,964,358],()=>e(e.s=9992)),_N_E=e.O()}]);