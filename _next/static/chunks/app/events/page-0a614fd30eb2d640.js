(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[634],{960:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});let a={src:"/_next/static/media/logo.21932253.png",height:779,width:779,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAbFBMVEX////SwcD20dPzwr7t9fGfurt5nKro7e3J29ymysbforXaxM6rvsT74tnuqaDQo7fU4uj4/Pz59/Ww2dPZ3NjWuLvtwcTZ29XZ6euLwcDGvt3gnKOVusP78eayxdOdqbTZt8+Mr7ntycW5vtCoSi2zAAAACXBIWXMAABcRAAAXEQHKJvM/AAAARUlEQVR4nBXLxxGAIAAAwUOyKJhztv8eHfe/QFlmGcCTy5TGmj2mazn8hIzhLfzcMqxC34V2NH3YTuEVqM6Yyv7NOmfhA3Z3AwyhtdhdAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8}},2105:(e,t,n)=>{"use strict";n.d(t,{A$:()=>d,AS:()=>o,DY:()=>r,In:()=>h,Pq:()=>x,QM:()=>u,VU:()=>y,Yq:()=>w,eg:()=>A,kQ:()=>i,lh:()=>s,pn:()=>c,s_:()=>v,xF:()=>m,zz:()=>l});var a=n(4298);let o="https://beginity-test.ddns.net";async function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();try{let n=await h("".concat(o,"/api/auth/register"),"POST",g(e.target,e.submitter));t(n)}catch(e){n(e)}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();try{let n=await h("".concat(o,"/api/auth/login"),"POST",g(e.target,e.submitter));t(n),p("token",n.token,1296e6),p("user-login-detail",{...n.user},1296e6)}catch(e){n(e)}}async function s(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();let r=new FormData(e.target,e.submitter),l={mandatory:"on"===r.get("mandatory"),title:r.get("title"),description:{detail:r.get("detail"),objectives:r.get("objectives").split("\n"),learning_outcomes:r.get("learning_outcomes").split("\n")},start_time:new Date(r.get("start_time")).toISOString(),end_time:new Date(r.get("end_time")).toISOString(),location:{address:r.get("address"),lat:Number.parseFloat(r.get("lat"))||null,long:Number.parseFloat(r.get("long"))||null},speaker_ids:null==r||null==(t=r.get("speaker_ids"))?void 0:t.split(",").map(e=>e.trim())};console.group("createEvent"),console.log(JSON.stringify(l,null,2));try{let e=await m("".concat(o,"/api/events"),"POST",l);n(e)}catch(e){a(e)}finally{console.groupEnd()}}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e||e.preventDefault();try{let e=await h("".concat(o,"/api/events/"),"GET",{});return console.log(e),e}catch(e){throw console.error(e),Error(e.message)}}async function c(e){e&&e.preventDefault();try{let e=await m("".concat(o,"/api/classrooms/"),"GET");return console.log(e),e}catch(e){throw Error(e.message)}}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();let a=new FormData(e.target,e.submitter);try{let e=f("token");if(!e)throw Error("Log in/ Register to Perform This action");let n=await fetch("".concat(o,"/file/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:a});if(!n.ok){let e=await n.json();throw Error(null==e?void 0:e.message)}let r=await n.json();return t(r),r}catch(e){return n(e),null}}async function d(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{console.log(e)},a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>console.error(e);try{let a=await h("".concat(o,"/api/auth/otp"),"post",{email:e,purpose:t});return n(a),a}catch(e){return a(e),null}}function g(e,t){let n=new FormData(e,t),a={};for(let[e,t]of n.entries())a[e]=t;return a}async function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let a={method:t,headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(n)};["GET","HEAD"].includes(t.toUpperCase())&&(a.body=void 0);let o=await fetch(e,a);if(!o.ok){let e=await o.json();throw console.dir(e),Error((null==e?void 0:e.message)||"Unknown Error!")}return await o.json()}catch(e){throw console.dir("Fetch request failed",e),e}}async function m(e,t,n){try{let a=f("token");if(!a)throw Error("Log in/ Register to Perform This action");let o={method:t,headers:{Authorization:"Bearer ".concat(a),"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(n)};["GET","HEAD"].includes(t.toUpperCase())&&(o.body=void 0);let r=await fetch(e,o);if(!r.ok){let e=await r.json();throw console.dir(e),Error((null==e?void 0:e.message)||"Unknown Error!")}return await r.json()}catch(e){throw console.log(e),e}}function p(e,t,n){let a={value:t,expiry:new Date().getTime()+n};localStorage.setItem(e,JSON.stringify(a))}function f(e){try{let t=localStorage.getItem(e);if(!t)return null;let n=JSON.parse(t);if(new Date().getTime()>n.expiry)return localStorage.removeItem(e),null;return n.value}catch(e){return console.warn("error",e),null}}r.handler=(e,t)=>n=>{r(n,e,t)},l.handler=(e,t)=>n=>{l(n,e,t)},s.handler=(e,t)=>n=>{s(n,e,t)},u.handler=(e,t)=>n=>{u(n,e,t)};class v{constructor({newMessageCallback:e,connectionCallback:t,successCallback:n,errorCallback:r,attendanceStartedCallback:l,punchInCallback:s,punchOutCallback:i}){if(v.instance)return v.instance;console.log("once created will not again");let c=(0,a.io)(o,{auth:{token:f("token")}});return c.on("punch_in",e=>{console.dir(" [socket] punch-in data:",e),s(e)}),c.on("punch_out",e=>{console.dir("[socket] punch-out data:",e),i(e)}),c.on("new_message",t=>{console.dir("[socket] new-message data:",t),e(t)}),c.on("connection",e=>{console.dir(" [socket] connected.."),t(e)}),c.on("success",e=>{(!e||(null==e?void 0:e.message))&&(e.message="connection successful"),console.dir("[socket] success message :",e),n(e)}),c.on("error",e=>{console.dir("[socket] error message :",e),r(e)}),c.on("attendance_started",e=>{console.dir("[socket] attendance started data : ",e),l(e)}),v.instance={socket:c,sendMessage:(e,t)=>{c.emit("new_message",{classroom_id:e,message:t})},startAttendance:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;c.emit("start_attendance",{classroom_id:e,timeout:t})},joinClassRoom:e=>{c.emit("join_classroom",{classroom_ids:e})},punchIn:e=>{console.dir(" [socket] punch-in data:",e),c.emit("punch_in",e)},punchOut:e=>{console.dir("[socket] punch-out data:",e),c.emit("punch_out",e)}},v.instance}}let y=async()=>{try{let e=!1;if((e=f("user-login-detail"))&&0!==Object.getOwnPropertyNames(e||{}).length)return e;return!1}catch(e){return console.error((null==e?void 0:e.message)||"unknown error"),!1}};async function w(e,t,n){let{event_id:a,classroom_id:r,user_id:l}=e;try{let e=await m("".concat(o,'/api/attendances?user_id="674b3c5e7fffda283acb6bbf&limit=1"'),"GET",{}),n=null==e?void 0:e.totalRecords;if(console.log("pre :",e),!n)throw Error("No records found!");let a=await m("".concat(o,'/api/attendances?user_id="674b3c5e7fffda283acb6bbf&limit=').concat(n),"GET",{});t(a),console.log(a)}catch(e){n(e),console.log(e)}}async function A(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};try{localStorage.removeItem("token"),localStorage.removeItem("user-login-detail"),e(),console.log("User logged out successfully.")}catch(e){console.error("Logout failed:",e),t(e)}}async function x(){try{let e=[];try{let t=await m("".concat(o,"/api/users?role=speaker"),"GET");Array.isArray(t)?e=t:Array.isArray(null==t?void 0:t.data)&&(e=t.data)}catch(e){console.warn("Filtered speakers fetch failed:",null==e?void 0:e.message)}if(!Array.isArray(e)||0===e.length){let t=await m("".concat(o,"/api/users"),"GET");e=(Array.isArray(t)?t:(null==t?void 0:t.data)||[]).filter(e=>(null==e?void 0:e.role)==="speaker")}return e||[]}catch(e){return console.error("Error fetching speakers:",(null==e?void 0:e.message)||e),[]}}w({},e=>console.log(e.message),e=>console.error(e.message)),A.handler=(e,t)=>()=>{A(e,t)}},2262:(e,t,n)=>{Promise.resolve().then(n.bind(n,7185)),Promise.resolve().then(n.bind(n,5799))},4239:(e,t,n)=>{"use strict";n.d(t,{A$:()=>a.A$,AS:()=>a.AS,DY:()=>a.DY,In:()=>a.In,Pq:()=>a.Pq,VU:()=>a.VU,Yq:()=>a.Yq,eg:()=>a.eg,kQ:()=>a.kQ,lh:()=>a.lh,pn:()=>a.pn,s_:()=>a.s_,xF:()=>a.xF,zz:()=>a.zz});var a=n(2105)},5695:(e,t,n)=>{"use strict";var a=n(8999);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}})},6004:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{A:()=>d});var o=n(5155),r=n(6874),l=n.n(r),s=n(6766),i=n(960),c=n(4239),u=n(5799);let e=await (0,c.VU)();function d(t){let{id:n,title:a,date:r,location:d,img:g}=t;return(0,o.jsxs)("div",{className:"relative gap-2 w-full md:w-1/2 lg:w-1/3 p-4 mt-1",children:[(0,o.jsx)(l(),{href:"/events/detail?id=".concat(n),className:"block",children:(0,o.jsx)("div",{className:"bg-white shadow-lg rounded-2xl overflow-hidden hover:shadow-2xl transition-shadow duration-300",children:(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(s.default,{src:g||i.A,alt:a,width:400,height:250,unoptimized:!0,className:"w-full h-48 object-cover"})})})}),(0,o.jsxs)("div",{className:"p-4",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold",children:a}),(0,o.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:new Date(r).toLocaleDateString("en-IN",{year:"numeric",month:"short",day:"numeric"})}),e&&(0,o.jsx)("button",{className:"absolute right-4 bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 z-10",onClick:()=>{(0,c.xF)("".concat(c.AS,"/api/attendances/").concat(n),"POST",{}).then(e=>u.oR.success(e.message)).catch(e=>u.oR.error(e.message))},children:"Enroll"}),(0,o.jsx)("p",{className:"text-gray-800 mt-2",children:d})]})]})}console.log(e),a()}catch(e){a(e)}},1)},7185:(e,t,n)=>{"use strict";n.a(e,async(e,a)=>{try{n.d(t,{default:()=>u});var o=n(5155),r=n(2115),l=n(6004),s=n(4239),i=n(8457),c=e([l]);l=(c.then?(await c)():c)[0];let d={all:"/api/events",upcoming:"/api/events/upcoming",ongoing:"/api/events/ongoing",ended:"/api/events/ended"};function u(){let[e,t]=(0,r.useState)([]),[n,a]=(0,r.useState)("all"),[c,u]=(0,r.useState)(!0),[g,h]=(0,r.useState)("");return((0,r.useEffect)(()=>{let e=!0;return(async()=>{u(!0),h("");try{let a;if("all"===n&&"function"==typeof s.kQ)a=await (0,s.kQ)();else{let e=d[n];a=await (0,s.In)("".concat(s.AS).concat(e),"GET")}let o=Array.isArray(a)?a:(null==a?void 0:a.events)||[];e&&t(o)}catch(t){e&&h((null==t?void 0:t.message)||"Failed to load events")}finally{e&&u(!1)}})(),()=>{e=!1}},[n]),c)?(0,o.jsx)(i.A,{}):g?(0,o.jsx)("p",{className:"text-red-500 text-center p-4",children:g}):(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{className:"w-full p-4 bg-white border-b sticky top-[64px] z-40",children:(0,o.jsx)("div",{className:"flex gap-3 overflow-x-auto",children:["all","upcoming","ongoing","ended"].map(e=>(0,o.jsx)("button",{onClick:()=>a(e),className:"px-4 py-2 rounded-full text-sm font-semibold transition\n                ".concat(n===e?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300","\n              "),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})}),(0,o.jsxs)("div",{className:"flex flex-wrap",children:[e.map(e=>{var t;let n=(null==e?void 0:e.start_time)?new Date(e.start_time):null,a=n?n.getFullYear():"N/A",r=n?n.getMonth()+1:"N/A";return(0,o.jsx)(l.A,{id:e._id,heading:e.title,date:{year:a,month:r},location:(null==e||null==(t=e.location)?void 0:t.address)||"Unknown",img:(null==e?void 0:e.image)?"".concat(s.AS).concat(e.image):"./logo.png"},e._id)}),!e.length&&(0,o.jsx)("p",{className:"w-full text-center text-gray-500 text-xl mt-6",children:"No events found."})]})]})}a()}catch(e){a(e)}})},8020:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var a=n(5155),o=n(6766),r=n(8274);function l(){return(0,a.jsxs)("div",{className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-white",children:[(0,a.jsx)(r.P.div,{initial:{scale:.8,opacity:.5},animate:{scale:[.9,1.1,.9],opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"absolute w-64 h-64 rounded-full bg-gradient-to-tr from-blue-400 to-purple-500 blur-3xl opacity-30"}),(0,a.jsx)(r.P.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.8,ease:"easeOut"},children:(0,a.jsx)(o.default,{src:"/loader.png",alt:"Loading...",width:200,height:200,priority:!0,className:"drop-shadow-lg"})}),(0,a.jsx)(r.P.p,{initial:{opacity:0},animate:{opacity:[0,1,0]},transition:{duration:1.5,repeat:1/0},className:"mt-6 text-lg font-semibold text-gray-600",children:"Loading..."})]})}},8457:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var a=n(5155),o=n(2115),r=n(5695),l=n(8020);function s(e){let{children:t}=e,[n,s]=(0,o.useState)(!1),i=(0,r.usePathname)();return(0,o.useEffect)(()=>{s(!0);let e=setTimeout(()=>{s(!1)},800);return()=>clearTimeout(e)},[i]),(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsx)(l.A,{}),t]})}}},e=>{e.O(0,[311,298,766,799,874,441,964,358],()=>e(e.s=2262)),_N_E=e.O()}]);