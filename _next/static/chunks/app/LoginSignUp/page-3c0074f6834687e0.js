(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{534:(e,t,r)=>{"use strict";r.d(t,{default:()=>j});var n=r(5155),l=r(2115),a=r(5695),o=r(5799);r(5716);var s=r(9911),i=r(7097),c=r(2515);let d=e=>{let{value:t,onChange:r}=e,[a,o]=(0,l.useState)(!1);return(0,n.jsxs)("div",{className:"flex items-center bg-gray-100 border border-gray-200 rounded-xl focus-within:ring-2 focus-within:ring-green-400 shadow-sm transition-all duration-200",children:[(0,n.jsx)(c.Rlk,{className:"text-gray-400 mx-3 text-lg"}),(0,n.jsx)("input",{type:a?"text":"password",name:"password",placeholder:"Password",value:t,onChange:r,className:"bg-transparent outline-none text-sm w-full p-2 text-gray-700 placeholder-gray-400"}),(0,n.jsx)("div",{onClick:()=>o(!a),className:"cursor-pointer pr-3 text-gray-500 hover:text-green-500 transition-colors",children:a?(0,n.jsx)(s.mx3,{}):(0,n.jsx)(s.Ny1,{})})]})},u="p-2 bg-gray-100 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200",m=e=>{let{role:t,formData:r,handleChange:l}=e;return"Student"===t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{name:"branch",placeholder:"Branch",value:r.branch,onChange:l,className:u}),(0,n.jsx)("input",{name:"year",type:"number",placeholder:"Year",value:r.year,onChange:l,className:u}),(0,n.jsx)("input",{name:"stream",placeholder:"Stream",value:r.stream,onChange:l,className:u}),(0,n.jsx)("input",{name:"enrollment_id",placeholder:"Enrollment ID",value:r.enrollment_id,onChange:l,className:u})]}):"Teacher"===t?(0,n.jsxs)("select",{name:"title",value:r.title,onChange:l,className:u,children:[(0,n.jsx)("option",{value:"",children:"Select Title"}),(0,n.jsx)("option",{value:"Program Coordinator",children:"Program Coordinator"}),(0,n.jsx)("option",{value:"Head Of Department",children:"Head Of Department"}),(0,n.jsx)("option",{value:"Dean",children:"Dean"}),(0,n.jsx)("option",{value:"Provost",children:"Provost"}),(0,n.jsx)("option",{value:"President",children:"President"})]}):null},g="p-2 bg-gray-100 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200",h=e=>{let{formData:t,handleChange:r,handleGetOtp:l,otpCooldown:a}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",name:"name",placeholder:"Name",value:t.name,onChange:r,className:g}),(0,n.jsx)("input",{type:"text",name:"nickname",placeholder:"Nickname",value:t.nickname,onChange:r,className:g}),(0,n.jsx)(i.A,{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:r,icon:s.Wjb}),(0,n.jsx)("button",{type:"button",onClick:l,disabled:a>0,className:"mt-2 p-2 rounded-xl w-full text-white font-medium transition-all duration-200 ".concat(a>0?"bg-gray-400 cursor-not-allowed":"bg-green-500 hover:bg-green-600 shadow-sm hover:shadow-md"),children:a>0?"Wait ".concat(a,"s"):"Get OTP"}),(0,n.jsx)("input",{type:"number",name:"otp",placeholder:"OTP",value:t.otp,onChange:r,className:g}),(0,n.jsx)(d,{value:t.password,onChange:r}),(0,n.jsxs)("select",{name:"role",value:t.role,onChange:r,className:g,children:[(0,n.jsx)("option",{value:"",children:"Select Role"}),(0,n.jsx)("option",{value:"Teacher",children:"Teacher"}),(0,n.jsx)("option",{value:"Student",children:"Student"})]}),(0,n.jsxs)("select",{name:"gender",value:t.gender,onChange:r,className:g,children:[(0,n.jsx)("option",{value:"",children:"Select Gender"}),(0,n.jsx)("option",{value:"male",children:"Male"}),(0,n.jsx)("option",{value:"female",children:"Female"}),(0,n.jsx)("option",{value:"other",children:"Other"})]}),(0,n.jsx)(m,{role:t.role,formData:t,handleChange:r})]})};var x=r(6874),f=r.n(x);let p=e=>{let{formData:t,handleChange:r}=e;return(0,a.useRouter)(),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"text",name:"nickname",placeholder:"Nickname",value:t.nickname,onChange:r,className:"p-2 bg-gray-100 border border-gray-200 rounded-xl focus:ring-2 focus:ring-green-400 shadow-sm text-sm text-gray-700 placeholder-gray-400 w-full transition-all duration-200"}),(0,n.jsx)(i.A,{type:"email",name:"email",placeholder:"Email",value:t.email,onChange:r,icon:s.Wjb}),(0,n.jsx)(d,{value:t.password,onChange:r}),(0,n.jsx)("div",{className:"text-right -mt-2",children:(0,n.jsx)(f(),{href:"/forgot-password",className:"text-sm font-medium text-green-600 hover:text-green-700 hover:underline transition-colors duration-200",children:"Forgot Password?"})})]})};var b=r(4239);let j=e=>{let{defaultType:t="register"}=e,[r,s]=(0,l.useState)("register"===t),[i,c]=(0,l.useState)({name:"",nickname:"",email:"",otp:"",password:"",role:"Student",gender:"Male",branch:"",year:"",stream:"",enrollmentId:"",title:""}),[d,u]=(0,l.useState)(0),m=(0,a.useRouter)();(0,l.useEffect)(()=>{if(d>0){let e=setTimeout(()=>u(d-1),1e3);return()=>clearTimeout(e)}},[d]),(0,l.useEffect)(()=>{s("register"===t)},[t]);let g=e=>{let{name:t,value:r}=e.target;c(e=>({...e,[t]:r}))},x=async e=>{r?await (0,b.DY)(e,e=>{o.oR.success("User registered successfully!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),s(!1)},e=>{o.oR.error(e.message||"Registration failed!",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}})}):await (0,b.zz)(e,e=>{var t;o.oR.success("Signed in successfully!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),(null==e||null==(t=e.user)?void 0:t.role)?m.push("/".concat(e.user.role.toLowerCase())):m.push("/student")},e=>{o.oR.error(e.message||"Login failed!",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}})})};return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen px-4 bg-gray-100",children:[(0,n.jsxs)("main",{className:"flex flex-col md:flex-row w-full max-w-6xl bg-white rounded-2xl shadow-2xl overflow-hidden",children:[(0,n.jsxs)("div",{className:"w-full md:w-3/5 p-6 sm:p-8",children:[(0,n.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold text-green-500 mb-4 text-center md:text-left",children:r?"Create Account":"Sign In"}),(0,n.jsxs)("form",{onSubmit:x,className:"gap-4 ".concat(r?"grid grid-cols-1 sm:grid-cols-2 gap-4":"flex flex-col gap-4"),children:[r?(0,n.jsx)(h,{formData:i,handleChange:g,handleGetOtp:()=>{if(!i.email)return void o.oR.error("Please enter your email first",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}});(0,b.A$)(i.email,"verification",e=>{o.oR.success(e.message||"OTP sent!",{style:{background:"#22c55e",color:"#fff",fontWeight:"500"}}),u(15)},e=>o.oR.error(e.message||"Failed to send OTP",{style:{background:"#dc2626",color:"#fff",fontWeight:"500"}}))},otpCooldown:d}):(0,n.jsx)(p,{formData:i,handleChange:g}),(0,n.jsx)("button",{className:"w-full mt-4 bg-green-500 text-white rounded-full px-12 py-2 font-semibold hover:bg-white hover:text-black border-2 border-green-500 transition-all duration-200",children:r?"Sign Up":"Sign In"})]})]}),(0,n.jsxs)("div",{className:"w-full md:w-2/5 bg-green-500 text-white flex flex-col items-center justify-center text-center py-12 px-6 sm:px-10 md:py-20",children:[(0,n.jsx)("h2",{className:"text-3xl sm:text-4xl font-bold mb-2",children:r?"Welcome Back!":"Hello, Friend!"}),(0,n.jsx)("div",{className:"border-2 w-10 border-white inline-block mb-4"}),(0,n.jsx)("p",{className:"mb-6 text-sm sm:text-base",children:r?"Already have an account? Sign in and continue your journey.":"Fill up personal information and start your journey with us."}),(0,n.jsx)("button",{onClick:()=>s(!r),className:"border-2 border-white rounded-full px-8 py-2 font-semibold hover:bg-white hover:text-black transition-all duration-200",children:r?"Sign In":"Sign Up"})]})]}),(0,n.jsx)(o.ToastContainer,{position:"top-right",autoClose:2e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"colored"})]})}},6654:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useMergedRef",{enumerable:!0,get:function(){return l}});let n=r(2115);function l(e,t){let r=(0,n.useRef)(null),l=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=l.current;t&&(l.current=null,t())}else e&&(r.current=a(e,n)),t&&(l.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},8306:(e,t,r)=>{Promise.resolve().then(r.bind(r,534))}},e=>{e.O(0,[797,711,479,298,799,874,165,441,964,358],()=>e(e.s=8306)),_N_E=e.O()}]);