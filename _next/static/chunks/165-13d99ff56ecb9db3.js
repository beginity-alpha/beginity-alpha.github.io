(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[165],{2105:(e,t,r)=>{"use strict";r.d(t,{A$:()=>d,AS:()=>o,DY:()=>a,In:()=>f,Pq:()=>O,QM:()=>u,VU:()=>v,Yq:()=>w,eg:()=>b,kQ:()=>i,lh:()=>s,pn:()=>c,s_:()=>y,xF:()=>p,zz:()=>l});var n=r(4298);let o="https://beginity-test.ddns.net";async function a(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();try{let r=await f("".concat(o,"/api/auth/register"),"POST",g(e.target,e.submitter));t(r)}catch(e){r(e)}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();try{let r=await f("".concat(o,"/api/auth/login"),"POST",g(e.target,e.submitter));t(r),h("token",r.token,1296e6),h("user-login-detail",{...r.user},1296e6)}catch(e){r(e)}}async function s(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();let a=new FormData(e.target,e.submitter),l={mandatory:"on"===a.get("mandatory"),title:a.get("title"),description:{detail:a.get("detail"),objectives:a.get("objectives").split("\n"),learning_outcomes:a.get("learning_outcomes").split("\n")},start_time:new Date(a.get("start_time")).toISOString(),end_time:new Date(a.get("end_time")).toISOString(),location:{address:a.get("address"),lat:Number.parseFloat(a.get("lat"))||null,long:Number.parseFloat(a.get("long"))||null},speaker_ids:null==a||null==(t=a.get("speaker_ids"))?void 0:t.split(",").map(e=>e.trim())};console.group("createEvent"),console.log(JSON.stringify(l,null,2));try{let e=await p("".concat(o,"/api/events"),"POST",l);r(e)}catch(e){n(e)}finally{console.groupEnd()}}async function i(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null==e||e.preventDefault();try{let e=await f("".concat(o,"/api/events/"),"GET",{});return console.log(e),e}catch(e){throw console.error(e),Error(e.message)}}async function c(e){e&&e.preventDefault();try{let e=await p("".concat(o,"/api/classrooms/"),"GET");return console.log(e),e}catch(e){throw Error(e.message)}}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{console.log(e)},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>console.error(e);e.preventDefault();let n=new FormData(e.target,e.submitter);try{let e=m("token");if(!e)throw Error("Log in/ Register to Perform This action");let r=await fetch("".concat(o,"/file/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(e)},body:n});if(!r.ok){let e=await r.json();throw Error(null==e?void 0:e.message)}let a=await r.json();return t(a),a}catch(e){return r(e),null}}async function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e=>{console.log(e)},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e=>console.error(e);try{let n=await f("".concat(o,"/api/auth/otp"),"post",{email:e,purpose:t});return r(n),n}catch(e){return n(e),null}}function g(e,t){let r=new FormData(e,t),n={};for(let[e,t]of r.entries())n[e]=t;return n}async function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};try{let n={method:t,headers:{"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(r)};["GET","HEAD"].includes(t.toUpperCase())&&(n.body=void 0);let o=await fetch(e,n);if(!o.ok){let e=await o.json();throw console.dir(e),Error((null==e?void 0:e.message)||"Unknown Error!")}return await o.json()}catch(e){throw console.dir("Fetch request failed",e),e}}async function p(e,t,r){try{let n=m("token");if(!n)throw Error("Log in/ Register to Perform This action");let o={method:t,headers:{Authorization:"Bearer ".concat(n),"Content-type":"application/json",Accept:"application/json"},body:JSON.stringify(r)};["GET","HEAD"].includes(t.toUpperCase())&&(o.body=void 0);let a=await fetch(e,o);if(!a.ok){let e=await a.json();throw console.dir(e),Error((null==e?void 0:e.message)||"Unknown Error!")}return await a.json()}catch(e){throw console.log(e),e}}function h(e,t,r){let n={value:t,expiry:new Date().getTime()+r};localStorage.setItem(e,JSON.stringify(n))}function m(e){try{let t=localStorage.getItem(e);if(!t)return null;let r=JSON.parse(t);if(new Date().getTime()>r.expiry)return localStorage.removeItem(e),null;return r.value}catch(e){return console.warn("error",e),null}}a.handler=(e,t)=>r=>{a(r,e,t)},l.handler=(e,t)=>r=>{l(r,e,t)},s.handler=(e,t)=>r=>{s(r,e,t)},u.handler=(e,t)=>r=>{u(r,e,t)};class y{constructor({newMessageCallback:e,connectionCallback:t,successCallback:r,errorCallback:a,attendanceStartedCallback:l,punchInCallback:s,punchOutCallback:i}){if(y.instance)return y.instance;console.log("once created will not again");let c=(0,n.io)(o,{auth:{token:m("token")}});return c.on("punch_in",e=>{console.dir(" [socket] punch-in data:",e),s(e)}),c.on("punch_out",e=>{console.dir("[socket] punch-out data:",e),i(e)}),c.on("new_message",t=>{console.dir("[socket] new-message data:",t),e(t)}),c.on("connection",e=>{console.dir(" [socket] connected.."),t(e)}),c.on("success",e=>{(!e||(null==e?void 0:e.message))&&(e.message="connection successful"),console.dir("[socket] success message :",e),r(e)}),c.on("error",e=>{console.dir("[socket] error message :",e),a(e)}),c.on("attendance_started",e=>{console.dir("[socket] attendance started data : ",e),l(e)}),y.instance={socket:c,sendMessage:(e,t)=>{c.emit("new_message",{classroom_id:e,message:t})},startAttendance:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;c.emit("start_attendance",{classroom_id:e,timeout:t})},joinClassRoom:e=>{c.emit("join_classroom",{classroom_ids:e})},punchIn:e=>{console.dir(" [socket] punch-in data:",e),c.emit("punch_in",e)},punchOut:e=>{console.dir("[socket] punch-out data:",e),c.emit("punch_out",e)}},y.instance}}let v=async()=>{try{let e=!1;if((e=m("user-login-detail"))&&0!==Object.getOwnPropertyNames(e||{}).length)return e;return!1}catch(e){return console.error((null==e?void 0:e.message)||"unknown error"),!1}};async function w(e,t,r){let{event_id:n,classroom_id:a,user_id:l}=e;try{let e=await p("".concat(o,'/api/attendances?user_id="674b3c5e7fffda283acb6bbf&limit=1"'),"GET",{}),r=null==e?void 0:e.totalRecords;if(console.log("pre :",e),!r)throw Error("No records found!");let n=await p("".concat(o,'/api/attendances?user_id="674b3c5e7fffda283acb6bbf&limit=').concat(r),"GET",{});t(n),console.log(n)}catch(e){r(e),console.log(e)}}async function b(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};try{localStorage.removeItem("token"),localStorage.removeItem("user-login-detail"),e(),console.log("User logged out successfully.")}catch(e){console.error("Logout failed:",e),t(e)}}async function O(){try{let e=[];try{let t=await p("".concat(o,"/api/users?role=speaker"),"GET");Array.isArray(t)?e=t:Array.isArray(null==t?void 0:t.data)&&(e=t.data)}catch(e){console.warn("Filtered speakers fetch failed:",null==e?void 0:e.message)}if(!Array.isArray(e)||0===e.length){let t=await p("".concat(o,"/api/users"),"GET");e=(Array.isArray(t)?t:(null==t?void 0:t.data)||[]).filter(e=>(null==e?void 0:e.role)==="speaker")}return e||[]}catch(e){return console.error("Error fetching speakers:",(null==e?void 0:e.message)||e),[]}}w({},e=>console.log(e.message),e=>console.error(e.message)),b.handler=(e,t)=>()=>{b(e,t)}},4239:(e,t,r)=>{"use strict";r.d(t,{A$:()=>n.A$,AS:()=>n.AS,DY:()=>n.DY,In:()=>n.In,Pq:()=>n.Pq,VU:()=>n.VU,Yq:()=>n.Yq,eg:()=>n.eg,kQ:()=>n.kQ,lh:()=>n.lh,pn:()=>n.pn,s_:()=>n.s_,xF:()=>n.xF,zz:()=>n.zz});var n=r(2105)},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>u});var n=r(2115),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(o),l=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach(function(t){var n,o,a;n=e,o=t,a=r[t],(o=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(o))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:o,size:a,title:i}=e,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,l),d=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==a?n.createElement(a.Consumer,null,e=>t(e)):t(o)}},5695:(e,t,r)=>{"use strict";var n=r(8999);r.o(n,"usePathname")&&r.d(t,{usePathname:function(){return n.usePathname}}),r.o(n,"useRouter")&&r.d(t,{useRouter:function(){return n.useRouter}})},5716:()=>{},7097:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var n=r(5155);r(2115);let o=e=>{let{icon:t,...r}=e;return(0,n.jsxs)("div",{className:"flex items-center bg-gray-100 border border-gray-200 rounded-xl focus-within:ring-2 focus-within:ring-green-400 shadow-sm transition-all duration-200",children:[t&&(0,n.jsx)(t,{className:"text-gray-400 mx-3 text-lg"}),(0,n.jsx)("input",{...r,className:"bg-transparent outline-none text-sm w-full p-2 text-gray-700 placeholder-gray-400 rounded-xl"})]})}}}]);